import{c as ct,R as et,j as t,r as ue,H as nt}from"./app-DBBJA5s0.js";import{G as ot,S as dt,a as mt}from"./glpi-footer-_zOhnKLE.js";import{T as m,c as tt,d as n,A as xt,a as ht,b as ft,e as gt,f as ut,C as pt}from"./table-DL_GshEd.js";import{c as lt,B as x}from"./button-DRayoMyr.js";import{I as jt}from"./input-BYwAceci.js";import{a as yt,D as bt,b as Nt,c as vt,d as St,e as _t}from"./dialog-DeYfauL4.js";import{a as wt,b as Ct,c as Dt,d as Ke,S as Tt}from"./select-WswpzhBt.js";import{C as Et,a as Ht}from"./chevrons-up-down-B62zPPP1.js";/* empty css            */import"./index-MowKvj_Y.js";import"./index-DPefeXFR.js";import"./index-CflLT-RI.js";import"./index-DK67a3Am.js";import"./index-C6L59rsk.js";import"./x-DYtBUVfd.js";import"./check-Br9I1vze.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Pt=lt("SquarePen",It);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Mt=lt("Trash2",zt);function Yt(Je){const e=ct.c(185),{tickets:a,filters:r,auth:o}=Je,[f,at]=et.useState(r.search||""),[Qe,ye]=et.useState(!1),[g,st]=et.useState(null);let be;e[0]!==o.user.id||e[1]!==o.user.role?(be=l=>o.user.role==="Administrador"?!0:o.user.role==="Técnico"?l.users_id_recipient===o.user.id:!1,e[0]=o.user.id,e[1]=o.user.role,e[2]=be):be=e[2];const pe=be;let Ne;e[3]!==o.user.role?(Ne=()=>o.user.role==="Administrador"||o.user.role==="Técnico",e[3]=o.user.role,e[4]=Ne):Ne=e[4];const d=Ne;let ve;e[5]===Symbol.for("react.memo_cache_sentinel")?(ve=l=>{st(l),ye(!0)},e[5]=ve):ve=e[5];const rt=ve;let Se;e[6]!==g?(Se=()=>{g&&ue.delete(`/soporte/casos/${g.id}`,{preserveScroll:!0,onSuccess:()=>{ye(!1),st(null)}})},e[6]=g,e[7]=Se):Se=e[7];const We=Se;let _e;e[8]!==r?(_e=l=>{const s=r.sort===l&&r.direction==="asc"?"desc":"asc";ue.get("/soporte/casos",{...r,sort:l,direction:s},{preserveState:!1,preserveScroll:!0})},e[8]=r,e[9]=_e):_e=e[9];const i=_e;let we;e[10]!==r?(we=l=>{l&&ue.get(l,r,{preserveState:!0,preserveScroll:!0})},e[10]=r,e[11]=we):we=e[11];const h=we;let Ce;e[12]!==r||e[13]!==f?(Ce=()=>{ue.get("/soporte/casos",{...r,search:f,page:1},{preserveState:!1,preserveScroll:!0})},e[12]=r,e[13]=f,e[14]=Ce):Ce=e[14];const u=Ce;let De;e[15]!==r?(De=l=>{ue.get("/soporte/casos",{...r,per_page:l,page:1},{preserveState:!1,preserveScroll:!0})},e[15]=r,e[16]=De):De=e[16];const Xe=De;let Te;e[17]!==r.direction||e[18]!==r.sort?(Te=l=>r.sort!==l?t.jsx(Et,{className:"h-3 w-3 ml-1 text-gray-400"}):r.direction==="asc"?t.jsx(xt,{className:"h-3 w-3 ml-1 text-[#2c4370]"}):t.jsx(ht,{className:"h-3 w-3 ml-1 text-[#2c4370]"}),e[17]=r.direction,e[18]=r.sort,e[19]=Te):Te=e[19];const c=Te,it=kt;let Ee;e[20]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(nt,{title:"HelpDesk HUV - Casos"}),e[20]=Ee):Ee=e[20];let He;e[21]===Symbol.for("react.memo_cache_sentinel")?(He=t.jsx(ot,{breadcrumb:t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Inicio"}),t.jsx("span",{className:"text-gray-400",children:"/"}),t.jsx("span",{className:"text-gray-600",children:"Soporte"}),t.jsx("span",{className:"text-gray-400",children:"/"}),t.jsx("span",{className:"font-medium text-gray-900",children:"Casos"})]})}),e[21]=He):He=e[21];let Ie;e[22]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Casos"}),e[22]=Ie):Ie=e[22];let Pe;e[23]===Symbol.for("react.memo_cache_sentinel")?(Pe=l=>at(l.target.value),e[23]=Pe):Pe=e[23];let p;e[24]!==u?(p=l=>{l.key==="Enter"&&u()},e[24]=u,e[25]=p):p=e[25];let j;e[26]!==f||e[27]!==p?(j=t.jsx(jt,{type:"text",placeholder:"Buscar...",className:"w-64 pr-10",value:f,onChange:Pe,onKeyDown:p}),e[26]=f,e[27]=p,e[28]=j):j=e[28];let ze;e[29]===Symbol.for("react.memo_cache_sentinel")?(ze=t.jsx(dt,{className:"h-4 w-4"}),e[29]=ze):ze=e[29];let y;e[30]!==u?(y=t.jsx(x,{size:"sm",variant:"ghost",className:"absolute right-0 top-0 h-full px-3",onClick:u,children:ze}),e[30]=u,e[31]=y):y=e[31];let b;e[32]!==j||e[33]!==y?(b=t.jsxs("div",{className:"relative",children:[j,y]}),e[32]=j,e[33]=y,e[34]=b):b=e[34];let Me;e[35]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(x,{className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:"Exportar"}),e[35]=Me):Me=e[35];let N;e[36]!==b?(N=t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsxs("div",{className:"flex items-center justify-between",children:[Ie,t.jsxs("div",{className:"flex items-center gap-3",children:[b,Me]})]})}),e[36]=b,e[37]=N):N=e[37];let ke;e[38]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx("span",{className:"text-sm text-gray-600",children:"Mostrar"}),e[38]=ke):ke=e[38];let v;e[39]!==r.per_page?(v=r.per_page.toString(),e[39]=r.per_page,e[40]=v):v=e[40];let Ae;e[41]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx(wt,{className:"w-20 h-8",children:t.jsx(Ct,{placeholder:"15"})}),e[41]=Ae):Ae=e[41];let Le;e[42]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsxs(Dt,{children:[t.jsx(Ke,{value:"15",children:"15"}),t.jsx(Ke,{value:"20",children:"20"}),t.jsx(Ke,{value:"50",children:"50"}),t.jsx(Ke,{value:"100",children:"100"})]}),e[42]=Le):Le=e[42];let S;e[43]!==Xe||e[44]!==v?(S=t.jsxs(Tt,{value:v,onValueChange:Xe,children:[Ae,Le]}),e[43]=Xe,e[44]=v,e[45]=S):S=e[45];let Ve;e[46]===Symbol.for("react.memo_cache_sentinel")?(Ve=t.jsx("span",{className:"text-sm text-gray-600",children:"elementos"}),e[46]=Ve):Ve=e[46];let _;e[47]!==S?(_=t.jsxs("div",{className:"flex items-center gap-3",children:[ke,S,Ve]}),e[47]=S,e[48]=_):_=e[48];let w;e[49]!==a.data.length?(w=t.jsx("span",{className:"font-medium",children:a.data.length}),e[49]=a.data.length,e[50]=w):w=e[50];let C;e[51]!==a.total?(C=t.jsx("span",{className:"font-medium",children:a.total}),e[51]=a.total,e[52]=C):C=e[52];let D;e[53]!==w||e[54]!==C?(D=t.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",w," de"," ",C," casos"]}),e[53]=w,e[54]=C,e[55]=D):D=e[55];let T;e[56]!==_||e[57]!==D?(T=t.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b flex items-center justify-between",children:[_,D]}),e[56]=_,e[57]=D,e[58]=T):T=e[58];let E;e[59]!==i?(E=()=>i("id"),e[59]=i,e[60]=E):E=e[60];let H;e[61]!==c?(H=t.jsxs("div",{className:"flex items-center",children:["ID",c("id")]}),e[61]=c,e[62]=H):H=e[62];let I;e[63]!==E||e[64]!==H?(I=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100 w-16",onClick:E,children:H}),e[63]=E,e[64]=H,e[65]=I):I=e[65];let P;e[66]!==i?(P=()=>i("name"),e[66]=i,e[67]=P):P=e[67];let z;e[68]!==c?(z=t.jsxs("div",{className:"flex items-center",children:["Título",c("name")]}),e[68]=c,e[69]=z):z=e[69];let M;e[70]!==P||e[71]!==z?(M=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:P,children:z}),e[70]=P,e[71]=z,e[72]=M):M=e[72];let k;e[73]!==i?(k=()=>i("status"),e[73]=i,e[74]=k):k=e[74];let A;e[75]!==c?(A=t.jsxs("div",{className:"flex items-center",children:["Estado",c("status")]}),e[75]=c,e[76]=A):A=e[76];let L;e[77]!==k||e[78]!==A?(L=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:k,children:A}),e[77]=k,e[78]=A,e[79]=L):L=e[79];let V;e[80]!==i?(V=()=>i("priority"),e[80]=i,e[81]=V):V=e[81];let R;e[82]!==c?(R=t.jsxs("div",{className:"flex items-center",children:["Prioridad",c("priority")]}),e[82]=c,e[83]=R):R=e[83];let $;e[84]!==V||e[85]!==R?($=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:V,children:R}),e[84]=V,e[85]=R,e[86]=$):$=e[86];let O;e[87]!==i?(O=()=>i("entity_name"),e[87]=i,e[88]=O):O=e[88];let q;e[89]!==c?(q=t.jsxs("div",{className:"flex items-center",children:["Entidad",c("entity_name")]}),e[89]=c,e[90]=q):q=e[90];let B;e[91]!==O||e[92]!==q?(B=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:O,children:q}),e[91]=O,e[92]=q,e[93]=B):B=e[93];let F;e[94]!==i?(F=()=>i("date"),e[94]=i,e[95]=F):F=e[95];let G;e[96]!==c?(G=t.jsxs("div",{className:"flex items-center",children:["Fecha de apertura",c("date")]}),e[96]=c,e[97]=G):G=e[97];let U;e[98]!==F||e[99]!==G?(U=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:F,children:G}),e[98]=F,e[99]=G,e[100]=U):U=e[100];let K;e[101]!==i?(K=()=>i("date_mod"),e[101]=i,e[102]=K):K=e[102];let J;e[103]!==c?(J=t.jsxs("div",{className:"flex items-center",children:["Última actualización",c("date_mod")]}),e[103]=c,e[104]=J):J=e[104];let Q;e[105]!==K||e[106]!==J?(Q=t.jsx(m,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:K,children:J}),e[105]=K,e[106]=J,e[107]=Q):Q=e[107];let Re,$e,Oe;e[108]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(m,{className:"font-semibold text-gray-900 text-xs",children:"Solicitante"}),$e=t.jsx(m,{className:"font-semibold text-gray-900 text-xs",children:"Asignado a"}),Oe=t.jsx(m,{className:"font-semibold text-gray-900 text-xs",children:"Categoría"}),e[108]=Re,e[109]=$e,e[110]=Oe):(Re=e[108],$e=e[109],Oe=e[110]);let W;e[111]!==d?(W=d()&&t.jsx(m,{className:"font-semibold text-gray-900 text-xs text-center w-24",children:"Acciones"}),e[111]=d,e[112]=W):W=e[112];let X;e[113]!==I||e[114]!==M||e[115]!==L||e[116]!==$||e[117]!==B||e[118]!==U||e[119]!==Q||e[120]!==W?(X=t.jsx(ft,{children:t.jsxs(tt,{className:"bg-gray-50",children:[I,M,L,$,B,U,Q,Re,$e,Oe,W]})}),e[113]=I,e[114]=M,e[115]=L,e[116]=$,e[117]=B,e[118]=U,e[119]=Q,e[120]=W,e[121]=X):X=e[121];let Y;if(e[122]!==pe||e[123]!==d||e[124]!==a.data){let l;e[126]!==pe||e[127]!==d?(l=s=>t.jsxs(tt,{className:"hover:bg-gray-50",children:[t.jsx(n,{className:"text-xs font-medium",children:s.id}),t.jsx(n,{className:"font-medium text-xs",children:t.jsx("a",{href:`/soporte/casos/${s.id}`,className:"text-[#2c4370] hover:underline block truncate max-w-md",title:s.name,children:s.name||"(Sin título)"})}),t.jsx(n,{className:"text-xs",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-semibold ${it(s.status)}`,children:s.status_name})}),t.jsx(n,{className:"text-xs",children:s.priority_name}),t.jsx(n,{className:"text-xs",children:s.entity_name||"-"}),t.jsx(n,{className:"text-xs text-gray-600",children:s.date?new Date(s.date).toLocaleDateString("es-CO",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}),t.jsx(n,{className:"text-xs text-gray-600",children:s.date_mod?new Date(s.date_mod).toLocaleDateString("es-CO",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}),t.jsx(n,{className:"text-xs",children:s.requester_name||"-"}),t.jsx(n,{className:"text-xs",children:s.assigned_name||"-"}),t.jsx(n,{className:"text-xs",children:s.category_name||"-"}),d()&&t.jsx(n,{className:"text-xs",children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(x,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",onClick:()=>ue.visit(`/soporte/casos/${s.id}/editar`),title:"Editar",children:t.jsx(Pt,{className:"h-3.5 w-3.5"})}),pe(s)&&t.jsx(x,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-red-600 hover:text-red-800 hover:bg-red-50",onClick:()=>rt(s),title:"Eliminar",children:t.jsx(Mt,{className:"h-3.5 w-3.5"})})]})})]},s.id),e[126]=pe,e[127]=d,e[128]=l):l=e[128],Y=a.data.map(l),e[122]=pe,e[123]=d,e[124]=a.data,e[125]=Y}else Y=e[125];let Z;e[129]!==d||e[130]!==a.data.length?(Z=a.data.length===0&&t.jsx(tt,{children:t.jsx(n,{colSpan:d()?11:10,className:"text-center py-8 text-gray-500",children:"No se encontraron casos"})}),e[129]=d,e[130]=a.data.length,e[131]=Z):Z=e[131];let ee;e[132]!==Y||e[133]!==Z?(ee=t.jsxs(gt,{children:[Y,Z]}),e[132]=Y,e[133]=Z,e[134]=ee):ee=e[134];let te;e[135]!==X||e[136]!==ee?(te=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(ut,{children:[X,ee]})}),e[135]=X,e[136]=ee,e[137]=te):te=e[137];let se;e[138]!==a.current_page?(se=t.jsx("span",{className:"font-medium",children:a.current_page}),e[138]=a.current_page,e[139]=se):se=e[139];let le;e[140]!==a.last_page?(le=t.jsx("span",{className:"font-medium",children:a.last_page}),e[140]=a.last_page,e[141]=le):le=e[141];let ae;e[142]!==se||e[143]!==le?(ae=t.jsxs("div",{className:"text-sm text-gray-600",children:["Página ",se," de"," ",le]}),e[142]=se,e[143]=le,e[144]=ae):ae=e[144];let re;if(e[145]!==h||e[146]!==a.links){let l;e[148]!==h||e[149]!==a.links.length?(l=(s,je)=>je===0?t.jsx(x,{variant:"outline",size:"sm",disabled:!s.url,className:"border-[#2c4370] text-[#2c4370] hover:!bg-[#2c4370] hover:!text-white disabled:opacity-50",onClick:()=>s.url&&h(s.url),children:t.jsx(pt,{className:"h-4 w-4"})},je):je===a.links.length-1?t.jsx(x,{variant:"outline",size:"sm",disabled:!s.url,className:"border-[#2c4370] text-[#2c4370] hover:!bg-[#2c4370] hover:!text-white disabled:opacity-50",onClick:()=>s.url&&h(s.url),children:t.jsx(Ht,{className:"h-4 w-4"})},je):t.jsx(x,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,className:s.active?"bg-[#2c4370] hover:!bg-[#3d5583] text-white border-[#2c4370]":"border-[#2c4370] text-[#2c4370] hover:!bg-[#2c4370] hover:!text-white",onClick:()=>s.url&&h(s.url),children:t.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},je),e[148]=h,e[149]=a.links.length,e[150]=l):l=e[150],re=a.links.map(l),e[145]=h,e[146]=a.links,e[147]=re}else re=e[147];let ie;e[151]!==re?(ie=t.jsx("div",{className:"flex items-center gap-2",children:re}),e[151]=re,e[152]=ie):ie=e[152];let ce;e[153]!==ae||e[154]!==ie?(ce=t.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[ae,ie]}),e[153]=ae,e[154]=ie,e[155]=ce):ce=e[155];let ne;e[156]!==N||e[157]!==T||e[158]!==te||e[159]!==ce?(ne=t.jsx("main",{className:"flex-1 px-6 py-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[N,T,te,ce]})}),e[156]=N,e[157]=T,e[158]=te,e[159]=ce,e[160]=ne):ne=e[160];let qe;e[161]===Symbol.for("react.memo_cache_sentinel")?(qe=t.jsx(mt,{}),e[161]=qe):qe=e[161];let oe;e[162]!==ne?(oe=t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[He,ne,qe]}),e[162]=ne,e[163]=oe):oe=e[163];let Be;e[164]===Symbol.for("react.memo_cache_sentinel")?(Be=t.jsx(yt,{children:"Eliminar Caso"}),e[164]=Be):Be=e[164];const Ye=g?.id;let de;e[165]!==Ye?(de=t.jsxs("strong",{children:["#",Ye]}),e[165]=Ye,e[166]=de):de=e[166];let Fe;e[167]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx("br",{}),e[167]=Fe):Fe=e[167];const Ze=g?.name;let me;e[168]!==Ze?(me=t.jsx("span",{className:"text-gray-600",children:Ze}),e[168]=Ze,e[169]=me):me=e[169];let xe;e[170]!==de||e[171]!==me?(xe=t.jsxs(bt,{children:[Be,t.jsxs(Nt,{children:["¿Está seguro que desea eliminar el caso ",de,"?",Fe,me]})]}),e[170]=de,e[171]=me,e[172]=xe):xe=e[172];let Ge;e[173]===Symbol.for("react.memo_cache_sentinel")?(Ge=t.jsx(x,{variant:"outline",onClick:()=>ye(!1),children:"Cancelar"}),e[173]=Ge):Ge=e[173];let he;e[174]!==We?(he=t.jsxs(vt,{className:"gap-2",children:[Ge,t.jsx(x,{variant:"destructive",onClick:We,className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]}),e[174]=We,e[175]=he):he=e[175];let fe;e[176]!==xe||e[177]!==he?(fe=t.jsxs(St,{className:"sm:max-w-[425px]",children:[xe,he]}),e[176]=xe,e[177]=he,e[178]=fe):fe=e[178];let ge;e[179]!==Qe||e[180]!==fe?(ge=t.jsx(_t,{open:Qe,onOpenChange:ye,children:fe}),e[179]=Qe,e[180]=fe,e[181]=ge):ge=e[181];let Ue;return e[182]!==oe||e[183]!==ge?(Ue=t.jsxs(t.Fragment,{children:[Ee,oe,ge]}),e[182]=oe,e[183]=ge,e[184]=Ue):Ue=e[184],Ue}function kt(Je){switch(Je){case 1:return"bg-blue-100 text-blue-800";case 2:return"bg-yellow-100 text-yellow-800";case 3:return"bg-yellow-100 text-yellow-800";case 4:return"bg-orange-100 text-orange-800";case 5:return"bg-green-100 text-green-800";case 6:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}export{Yt as default};
