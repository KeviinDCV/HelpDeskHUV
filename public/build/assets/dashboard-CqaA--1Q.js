import{c as Ie,j as s,L as we,u as Je,a as c,r as _e,H as Ke}from"./app-C41qWrB4.js";import{T as Be,C as Fe,U as De,G as Qe,a as We}from"./glpi-footer-DEeSOnZr.js";import{C as ge,a as pe,b as fe,c as He}from"./card-W9U80ddP.js";import{a as be,B as r}from"./button-DB5x4sHi.js";import{C as Ye,U as Se}from"./users-smlmna94.js";import{S as Ze,a as es,b as ss,c as ts,d as ls}from"./select-B9TXBinu.js";import{C as Ue,T as as,F as is}from"./triangle-alert-DdUIdefL.js";import{E as cs}from"./eye-wbJymf21.js";import{X as Ce}from"./index-Nr1Am1Hd.js";import{L as Te}from"./loader-circle-C2j-14GM.js";import{M as ns}from"./map-pin-Bf7wdNG_.js";import{U as rs}from"./user-K5f8NucC.js";/* empty css            */import"./dialog-DI1zwVzk.js";import"./input-B121t-EF.js";import"./monitor-1Wlq1nsx.js";import"./index-DME2hh2I.js";import"./index-pxxy-XHG.js";import"./index-BXyiGrpl.js";import"./check-CA6N1oVQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],ze=be("Pin",os);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Le=be("SquareCheckBig",ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],xs=be("Tag",ds);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],gs=be("UserCheck",hs);function ps(o){const e=Ie.c(20),{stats:i}=o;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(ge,{className:"pb-2 px-3 sm:px-6",children:s.jsx(pe,{className:"text-sm font-semibold text-[#2c5599]",children:"Resumen"})}),e[0]=g):g=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(Be,{className:"w-5 h-5 lg:w-4 lg:h-4 text-red-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Sin asignar"})]}),e[1]=m):m=e[1];let n;e[2]!==i.publicUnassigned?(n=s.jsx(we,{href:"/soporte/casos?filter=unassigned",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-red-50 rounded-lg hover:bg-red-100 transition-colors cursor-pointer text-center lg:text-left",children:[m,s.jsx("span",{className:"font-bold text-red-600 text-lg lg:text-base",children:i.publicUnassigned})]})}),e[2]=i.publicUnassigned,e[3]=n):n=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(gs,{className:"w-5 h-5 lg:w-4 lg:h-4 text-blue-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Mis casos"})]}),e[4]=d):d=e[4];let a;e[5]!==i.myTickets?(a=s.jsx(we,{href:"/soporte/casos?filter=my_cases",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer text-center lg:text-left",children:[d,s.jsx("span",{className:"font-bold text-blue-600 text-lg lg:text-base",children:i.myTickets})]})}),e[5]=i.myTickets,e[6]=a):a=e[6];let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(Ye,{className:"w-5 h-5 lg:w-4 lg:h-4 text-green-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Resueltos"})]}),e[7]=p):p=e[7];let j;e[8]!==i.resolvedToday?(j=s.jsx(we,{href:"/soporte/casos?filter=resolved_today",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-green-50 rounded-lg hover:bg-green-100 transition-colors cursor-pointer text-center lg:text-left",children:[p,s.jsx("span",{className:"font-bold text-green-600 text-lg lg:text-base",children:i.resolvedToday})]})}),e[8]=i.resolvedToday,e[9]=j):j=e[9];let x;e[10]!==n||e[11]!==a||e[12]!==j?(x=s.jsxs(fe,{className:"bg-white border shadow-sm",children:[g,s.jsx(He,{className:"px-3 sm:px-6",children:s.jsxs("div",{className:"grid grid-cols-3 lg:grid-cols-1 gap-2 lg:space-y-3 lg:gap-0",children:[n,a,j]})})]}),e[10]=n,e[11]=a,e[12]=j,e[13]=x):x=e[13];let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(ge,{className:"pb-3",children:s.jsx(pe,{className:"text-sm font-semibold text-center text-[#2c5599]",children:"Su planeación"})}),e[14]=k):k=e[14];let w;e[15]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs(fe,{className:"bg-gray-100 border-gray-300",children:[k,s.jsx(He,{children:s.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"No hay eventos para mostrar"})})]}),e[15]=w):w=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(fe,{className:"bg-gray-100 border-gray-300",children:s.jsx(ge,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pe,{className:"text-sm font-semibold text-[#2c5599] flex-1 text-center",children:"Recordatorios personales"}),s.jsx(ze,{className:"h-4 w-4 text-gray-500"})]})})}),e[16]=_):_=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("div",{className:"hidden lg:block space-y-4",children:[w,_,s.jsx(fe,{className:"bg-gray-100 border-gray-300",children:s.jsx(ge,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pe,{className:"text-sm font-semibold text-[#2c5599] flex-1 text-center",children:"Recordatorios públicos"}),s.jsx(ze,{className:"h-4 w-4 text-gray-500"})]})})})]}),e[17]=S):S=e[17];let C;return e[18]!==x?(C=s.jsxs("div",{className:"w-full lg:w-80 space-y-4",children:[x,S]}),e[18]=x,e[19]=C):C=e[19],C}function fs(o){const e=Ie.c(4),{activeTab:i,onTabChange:g}=o;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=["Reportes Públicos","Mis Reportes"],e[0]=m):m=e[0];const n=m;let d;return e[1]!==i||e[2]!==g?(d=s.jsx("div",{className:"px-3 sm:px-6 pt-4 sm:pt-6 pb-2 sm:pb-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm inline-flex w-full sm:w-auto",children:n.map(a=>s.jsx(r,{variant:"ghost",onClick:()=>g(a),className:`flex-1 sm:flex-initial px-3 sm:px-6 py-2 sm:py-2.5 text-xs sm:text-sm font-medium rounded-t-lg transition-colors ${i===a?"bg-[#2c4370] text-white hover:bg-[#2c4370]":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:a},a))})}),e[1]=i,e[2]=g,e[3]=d):d=e[3],d}const Ve={1:"bg-gray-100 text-gray-600",2:"bg-blue-100 text-blue-600",3:"bg-yellow-100 text-yellow-700",4:"bg-orange-100 text-orange-600",5:"bg-red-100 text-red-600",6:"bg-red-200 text-red-700"},Ee={1:"bg-blue-100 text-blue-700",2:"bg-yellow-100 text-yellow-700",3:"bg-purple-100 text-purple-700",4:"bg-orange-100 text-orange-700",5:"bg-green-100 text-green-700",6:"bg-gray-100 text-gray-600"};function zs(o){const e=Ie.c(78),{publicTickets:i,myTickets:g,stats:m,technicians:n,auth:d}=o,{props:a}=Je(),[p,j]=c.useState("Reportes Públicos"),[x,k]=c.useState(null),[w,_]=c.useState(i),[S,C]=c.useState(g),[O,qe]=c.useState(m);let X;e[0]===Symbol.for("react.memo_cache_sentinel")?(X={open:!1,ticket:null,loading:!1},e[0]=X):X=e[0];const[l,v]=c.useState(X);let J;e[1]===Symbol.for("react.memo_cache_sentinel")?(J={open:!1,ticketId:null,ticketName:""},e[1]=J):J=e[1];const[f,K]=c.useState(J),[N,Me]=c.useState(""),[Q,Re]=c.useState(!1);let W;e[2]===Symbol.for("react.memo_cache_sentinel")?(W={open:!1,ticketId:null,ticketName:""},e[2]=W):W=e[2];const[b,Y]=c.useState(W),[y,ue]=c.useState(""),[Z,$e]=c.useState(!1),T=d?.user?.role==="Administrador";let ee,se;e[3]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{const u=setInterval(async()=>{try{const G=await fetch("/dashboard/tickets");if(G.ok){const he=await G.json();_(he.publicTickets),C(he.myTickets),qe(he.stats)}}catch(G){console.error("Error fetching tickets:",G)}},1e4);return()=>clearInterval(u)},se=[],e[3]=ee,e[4]=se):(ee=e[3],se=e[4]),c.useEffect(ee,se);let te;e[5]===Symbol.for("react.memo_cache_sentinel")?(te=async t=>{v({open:!0,ticket:null,loading:!0});try{const u=await fetch(`/dashboard/ticket/${t}`);if(u.ok){const G=await u.json();v({open:!0,ticket:G,loading:!1})}}catch{v({open:!1,ticket:null,loading:!1})}},e[5]=te):te=e[5];const Ge=te;let le;e[6]===Symbol.for("react.memo_cache_sentinel")?(le=(t,u)=>{K({open:!0,ticketId:t,ticketName:u}),Me("")},e[6]=le):le=e[6];const Ae=le;let ae;e[7]!==f.ticketId||e[8]!==N?(ae=()=>{!f.ticketId||!N||(Re(!0),_e.post(`/dashboard/assign-ticket/${f.ticketId}`,{technician_id:N},{onFinish:()=>{Re(!1),K({open:!1,ticketId:null,ticketName:""})}}))},e[7]=f.ticketId,e[8]=N,e[9]=ae):ae=e[9];const je=ae;let ie;e[10]===Symbol.for("react.memo_cache_sentinel")?(ie=(t,u)=>{Y({open:!0,ticketId:t,ticketName:u}),ue("")},e[10]=ie):ie=e[10];const Oe=ie;let ce;e[11]!==y||e[12]!==b.ticketId?(ce=()=>{!b.ticketId||!y.trim()||($e(!0),_e.post(`/dashboard/solve-ticket/${b.ticketId}`,{solution:y.trim()},{onFinish:()=>{$e(!1),Y({open:!1,ticketId:null,ticketName:""}),ue("")}}))},e[11]=y,e[12]=b.ticketId,e[13]=ce):ce=e[13];const Ne=ce;let ne;e[14]===Symbol.for("react.memo_cache_sentinel")?(ne=t=>{k(t),_e.post(`/dashboard/take-ticket/${t}`,{},{onFinish:()=>k(null)})},e[14]=ne):ne=e[14];const Pe=ne,Xe=us,re=p==="Reportes Públicos"?w:S,h=p==="Reportes Públicos";let oe;e[15]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Ke,{title:"HelpDesk HUV - Dashboard"}),e[15]=oe):oe=e[15];let me;e[16]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Qe,{}),e[16]=me):me=e[16];let I;e[17]!==p?(I=s.jsx(fs,{activeTab:p,onTabChange:j}),e[17]=p,e[18]=I):I=e[18];let M;e[19]!==a.flash?(M=a.flash?.success&&s.jsxs("div",{className:"mx-3 sm:mx-6 mt-4 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4 flex items-center gap-3",children:[s.jsx(Ue,{className:"w-5 h-5 text-green-600 shrink-0"}),s.jsx("span",{className:"text-green-700 text-sm sm:text-base",children:a.flash.success})]}),e[19]=a.flash,e[20]=M):M=e[20];let R;e[21]!==a.flash?(R=a.flash?.error&&s.jsxs("div",{className:"mx-3 sm:mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 flex items-center gap-3",children:[s.jsx(as,{className:"w-5 h-5 text-red-600 shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm sm:text-base",children:a.flash.error})]}),e[21]=a.flash,e[22]=R):R=e[22];let $;e[23]!==h?($=h?s.jsx(Be,{className:"w-5 h-5 text-[#2c4370] shrink-0"}):s.jsx(is,{className:"w-5 h-5 text-[#2c4370] shrink-0"}),e[23]=h,e[24]=$):$=e[24];const ye=h?"Reportes Públicos":"Mis Reportes";let A;e[25]!==ye?(A=s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800",children:ye}),e[25]=ye,e[26]=A):A=e[26];const ke=`text-xs font-medium px-2 py-0.5 sm:px-2.5 sm:py-1 rounded-full ${h?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,ve=h?`${O.publicUnassigned} pendientes`:`${O.myTickets} activos`;let P;e[27]!==ke||e[28]!==ve?(P=s.jsx("span",{className:ke,children:ve}),e[27]=ke,e[28]=ve,e[29]=P):P=e[29];let F;e[30]!==$||e[31]!==A||e[32]!==P?(F=s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[$,A,P]})}),e[30]=$,e[31]=A,e[32]=P,e[33]=F):F=e[33];let D;e[34]!==re||e[35]!==T||e[36]!==h||e[37]!==x?(D=re.length===0?s.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[s.jsx(Ue,{className:"w-10 h-10 sm:w-12 sm:h-12 text-green-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:h?"No hay reportes públicos pendientes":"No tienes reportes abiertos"})]}):s.jsx("div",{className:"divide-y",children:re.map(t=>s.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-1 flex-wrap",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:["#",t.id]}),s.jsx("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-0.5 rounded ${Ve[t.priority]}`,children:t.priority_name}),!h&&s.jsx("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-0.5 rounded ${Ee[t.status]}`,children:t.status_name}),t.category_name&&s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-1.5 sm:px-2 py-0.5 rounded hidden sm:inline",children:t.category_name})]}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base line-clamp-2 sm:truncate",children:t.name}),s.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2 hidden sm:block",children:[Xe(t.content).substring(0,150),"..."]}),s.jsx("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Fe,{className:"w-3 h-3"}),new Date(t.date_creation).toLocaleDateString("es-CO",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})]})})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 shrink-0",children:[s.jsxs(r,{variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3",onClick:()=>Ge(t.id),children:[s.jsx(cs,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ver"})]}),h?s.jsxs(s.Fragment,{children:[s.jsxs(r,{onClick:()=>Pe(t.id),disabled:x===t.id,size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white text-xs sm:text-sm px-2 sm:px-3",children:[s.jsx(De,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:x===t.id?"Tomando...":"Tomar"})]}),T&&s.jsxs(r,{size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white text-xs sm:text-sm px-2 sm:px-3",onClick:()=>Ae(t.id,t.name),children:[s.jsx(Se,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Asignar"})]})]}):s.jsxs(r,{onClick:()=>Oe(t.id,t.name),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm px-2 sm:px-3",children:[s.jsx(Le,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Resolver"})]})]})]})},t.id))}),e[34]=re,e[35]=T,e[36]=h,e[37]=x,e[38]=D):D=e[38];let H;e[39]!==F||e[40]!==D?(H=s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[F,D]})}),e[39]=F,e[40]=D,e[41]=H):H=e[41];let U;e[42]!==O?(U=s.jsx(ps,{stats:O}),e[42]=O,e[43]=U):U=e[43];let z;e[44]!==H||e[45]!==U?(z=s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 p-3 sm:p-4",children:[H,U]}),e[44]=H,e[45]=U,e[46]=z):z=e[46];let L;e[47]!==I||e[48]!==M||e[49]!==R||e[50]!==z?(L=s.jsxs("main",{className:"flex-1 bg-gray-50",children:[I,M,R,z]}),e[47]=I,e[48]=M,e[49]=R,e[50]=z,e[51]=L):L=e[51];let de;e[52]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(We,{}),e[52]=de):de=e[52];let V;e[53]!==L?(V=s.jsxs("div",{className:"min-h-screen flex flex-col",children:[me,L,de]}),e[53]=L,e[54]=V):V=e[54];let E;e[55]!==l.loading||e[56]!==l.open||e[57]!==l.ticket||e[58]!==T?(E=l.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Detalles del Caso"}),s.jsx("button",{onClick:()=>v({open:!1,ticket:null,loading:!1}),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(Ce,{className:"w-5 h-5"})})]}),l.loading?s.jsx("div",{className:"p-12 flex items-center justify-center",children:s.jsx(Te,{className:"w-8 h-8 animate-spin text-[#2c4370]"})}):l.ticket&&s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:["#",l.ticket.id]}),s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${Ve[l.ticket.priority]}`,children:l.ticket.priority_name}),s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${Ee[l.ticket.status]}`,children:l.ticket.status_name})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:l.ticket.name}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.ticket.category_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:l.ticket.category_name})]}),l.ticket.location_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:l.ticket.location_name})]}),l.ticket.assigned_tech&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:l.ticket.assigned_tech})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fe,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:new Date(l.ticket.date_creation).toLocaleString("es-CO")})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Descripción"}),s.jsx("div",{className:"prose prose-sm max-w-none text-gray-600 bg-gray-50 p-4 rounded-lg",dangerouslySetInnerHTML:{__html:l.ticket.content}})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(r,{variant:"outline",onClick:()=>v({open:!1,ticket:null,loading:!1}),children:"Cerrar"}),l.ticket.status===1&&s.jsxs(s.Fragment,{children:[s.jsxs(r,{onClick:()=>{v({open:!1,ticket:null,loading:!1}),Pe(l.ticket.id)},className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:[s.jsx(De,{className:"w-4 h-4 mr-1"}),"Tomar"]}),T&&s.jsxs(r,{className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",onClick:()=>{v({open:!1,ticket:null,loading:!1}),Ae(l.ticket.id,l.ticket.name)},children:[s.jsx(Se,{className:"w-4 h-4 mr-1"}),"Asignar"]})]})]})]})]})}),e[55]=l.loading,e[56]=l.open,e[57]=l.ticket,e[58]=T,e[59]=E):E=e[59];let B;e[60]!==f.open||e[61]!==f.ticketName||e[62]!==je||e[63]!==Q||e[64]!==N||e[65]!==n?(B=f.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Asignar Caso"}),s.jsx("button",{onClick:()=>K({open:!1,ticketId:null,ticketName:""}),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(Ce,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Asignar el caso ",s.jsxs("strong",{children:['"',f.ticketName,'"']})," a:"]}),s.jsxs(Ze,{value:N,onValueChange:Me,children:[s.jsx(es,{className:"w-full",children:s.jsx(ss,{placeholder:"Seleccionar técnico..."})}),s.jsx(ts,{children:n?.map(bs)})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[s.jsx(r,{variant:"outline",onClick:()=>K({open:!1,ticketId:null,ticketName:""}),children:"Cancelar"}),s.jsx(r,{onClick:je,disabled:!N||Q,className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:Q?s.jsxs(s.Fragment,{children:[s.jsx(Te,{className:"w-4 h-4 mr-1 animate-spin"}),"Asignando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Se,{className:"w-4 h-4 mr-1"}),"Asignar"]})})]})]})}),e[60]=f.open,e[61]=f.ticketName,e[62]=je,e[63]=Q,e[64]=N,e[65]=n,e[66]=B):B=e[66];let q;e[67]!==y||e[68]!==b.open||e[69]!==b.ticketName||e[70]!==Ne||e[71]!==Z?(q=b.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Resolver Caso"}),s.jsx("button",{onClick:()=>Y({open:!1,ticketId:null,ticketName:""}),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(Ce,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Resolver el caso ",s.jsxs("strong",{children:['"',b.ticketName,'"']})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descripción de la solución ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:y,onChange:t=>ue(t.target.value),placeholder:"Describe cómo se resolvió el problema...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 min-h-[120px]",autoFocus:!0})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[s.jsx(r,{variant:"outline",onClick:()=>Y({open:!1,ticketId:null,ticketName:""}),children:"Cancelar"}),s.jsx(r,{onClick:Ne,disabled:!y.trim()||Z,className:"bg-green-600 hover:bg-green-700 text-white",children:Z?s.jsxs(s.Fragment,{children:[s.jsx(Te,{className:"w-4 h-4 mr-1 animate-spin"}),"Resolviendo..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Le,{className:"w-4 h-4 mr-1"}),"Resolver"]})})]})]})}),e[67]=y,e[68]=b.open,e[69]=b.ticketName,e[70]=Ne,e[71]=Z,e[72]=q):q=e[72];let xe;return e[73]!==V||e[74]!==E||e[75]!==B||e[76]!==q?(xe=s.jsxs(s.Fragment,{children:[oe,V,E,B,q]}),e[73]=V,e[74]=E,e[75]=B,e[76]=q,e[77]=xe):xe=e[77],xe}function bs(o){return s.jsx(ls,{value:o.id.toString(),children:o.name},o.id)}function us(o){const e=document.createElement("div");return e.innerHTML=o,e.textContent||e.innerText||""}export{zs as default};
