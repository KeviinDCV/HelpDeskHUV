import{c as Te,j as s,L as ve,u as Je,a as c,r as we,H as Ke}from"./app-7tz0x6lN.js";import{T as Be,C as Fe,U as De,G as Qe,a as We}from"./glpi-footer-B2M7wsLS.js";import{C as ge,a as pe,b as fe,c as Ue}from"./card-Bj2iIzwH.js";import{a as Ie,B as n}from"./button-ggm2gZbk.js";import{C as Ye,U as _e}from"./users-DEFgXEUY.js";import{S as Ze,a as es,b as ss,c as ts,d as as}from"./select-BQj_dMHg.js";import{C as He,T as ls,F as is}from"./triangle-alert-BM1YTml_.js";import{E as cs}from"./eye-rWf4FW3i.js";import{X as Se}from"./index-CNqRMLpd.js";import{L as Ce}from"./loader-circle-C0aJhnO5.js";import{T as rs}from"./tag-cPZw7Hoa.js";import{M as ns}from"./map-pin-DI71eIWz.js";import{U as os}from"./user-onRpLqQi.js";/* empty css            */import"./dialog-BMZg2aP_.js";import"./input-C4LkQi6i.js";import"./monitor-9LElfYY8.js";import"./index-BdOi00J0.js";import"./index-B5rNoLQi.js";import"./index-CKZSRzr4.js";import"./check-QIMEqREP.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Le=Ie("Pin",ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ze=Ie("SquareCheckBig",xs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],hs=Ie("UserCheck",ds);function gs(o){const e=Te.c(20),{stats:i}=o;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(ge,{className:"pb-2 px-3 sm:px-6",children:s.jsx(pe,{className:"text-sm font-semibold text-[#2c5599]",children:"Resumen"})}),e[0]=g):g=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(Be,{className:"w-5 h-5 lg:w-4 lg:h-4 text-red-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Sin asignar"})]}),e[1]=m):m=e[1];let r;e[2]!==i.publicUnassigned?(r=s.jsx(ve,{href:"/soporte/casos?filter=unassigned",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-red-50 hover:bg-red-100 transition-colors cursor-pointer text-center lg:text-left",children:[m,s.jsx("span",{className:"font-bold text-red-600 text-lg lg:text-base",children:i.publicUnassigned})]})}),e[2]=i.publicUnassigned,e[3]=r):r=e[3];let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(hs,{className:"w-5 h-5 lg:w-4 lg:h-4 text-blue-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Mis casos"})]}),e[4]=x):x=e[4];let l;e[5]!==i.myTickets?(l=s.jsx(ve,{href:"/soporte/casos?filter=my_cases",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-blue-50 hover:bg-blue-100 transition-colors cursor-pointer text-center lg:text-left",children:[x,s.jsx("span",{className:"font-bold text-blue-600 text-lg lg:text-base",children:i.myTickets})]})}),e[5]=i.myTickets,e[6]=l):l=e[6];let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(Ye,{className:"w-5 h-5 lg:w-4 lg:h-4 text-green-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Resueltos"})]}),e[7]=p):p=e[7];let u;e[8]!==i.resolvedToday?(u=s.jsx(ve,{href:"/soporte/casos?filter=resolved_today",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-green-50 hover:bg-green-100 transition-colors cursor-pointer text-center lg:text-left",children:[p,s.jsx("span",{className:"font-bold text-green-600 text-lg lg:text-base",children:i.resolvedToday})]})}),e[8]=i.resolvedToday,e[9]=u):u=e[9];let d;e[10]!==r||e[11]!==l||e[12]!==u?(d=s.jsxs(fe,{className:"bg-white border shadow-sm",children:[g,s.jsx(Ue,{className:"px-3 sm:px-6",children:s.jsxs("div",{className:"grid grid-cols-3 lg:grid-cols-1 gap-2 lg:space-y-3 lg:gap-0",children:[r,l,u]})})]}),e[10]=r,e[11]=l,e[12]=u,e[13]=d):d=e[13];let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(ge,{className:"pb-3",children:s.jsx(pe,{className:"text-sm font-semibold text-center text-[#2c5599]",children:"Su planeación"})}),e[14]=k):k=e[14];let w;e[15]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs(fe,{className:"bg-gray-100 border-gray-300",children:[k,s.jsx(Ue,{children:s.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"No hay eventos para mostrar"})})]}),e[15]=w):w=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(fe,{className:"bg-gray-100 border-gray-300",children:s.jsx(ge,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pe,{className:"text-sm font-semibold text-[#2c5599] flex-1 text-center",children:"Recordatorios personales"}),s.jsx(Le,{className:"h-4 w-4 text-gray-500"})]})})}),e[16]=_):_=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("div",{className:"hidden lg:block space-y-4",children:[w,_,s.jsx(fe,{className:"bg-gray-100 border-gray-300",children:s.jsx(ge,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pe,{className:"text-sm font-semibold text-[#2c5599] flex-1 text-center",children:"Recordatorios públicos"}),s.jsx(Le,{className:"h-4 w-4 text-gray-500"})]})})})]}),e[17]=S):S=e[17];let C;return e[18]!==d?(C=s.jsxs("div",{className:"w-full lg:w-80 space-y-4",children:[d,S]}),e[18]=d,e[19]=C):C=e[19],C}function ps(o){const e=Te.c(4),{activeTab:i,onTabChange:g}=o;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=["Reportes Públicos","Mis Reportes"],e[0]=m):m=e[0];const r=m;let x;return e[1]!==i||e[2]!==g?(x=s.jsx("div",{className:"px-3 sm:px-6 pt-4 sm:pt-6 pb-2 sm:pb-4",children:s.jsx("div",{className:"bg-white shadow-sm border border-gray-200 inline-flex w-full sm:w-auto",children:r.map(l=>s.jsx(n,{variant:"ghost",onClick:()=>g(l),className:`flex-1 sm:flex-initial px-3 sm:px-6 py-2 sm:py-2.5 text-xs sm:text-sm font-medium transition-colors ${i===l?"bg-[#2c4370] text-white hover:bg-[#2c4370]":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:l},l))})}),e[1]=i,e[2]=g,e[3]=x):x=e[3],x}const Ve={1:"bg-gray-100 text-gray-600",2:"bg-blue-100 text-blue-600",3:"bg-yellow-100 text-yellow-700",4:"bg-orange-100 text-orange-600",5:"bg-red-100 text-red-600",6:"bg-red-200 text-red-700"},Ee={1:"bg-blue-100 text-blue-700",2:"bg-yellow-100 text-yellow-700",3:"bg-purple-100 text-purple-700",4:"bg-orange-100 text-orange-700",5:"bg-green-100 text-green-700",6:"bg-gray-100 text-gray-600"};function Ls(o){const e=Te.c(78),{publicTickets:i,myTickets:g,stats:m,technicians:r,auth:x}=o,{props:l}=Je(),[p,u]=c.useState("Reportes Públicos"),[d,k]=c.useState(null),[w,_]=c.useState(i),[S,C]=c.useState(g),[O,qe]=c.useState(m);let X;e[0]===Symbol.for("react.memo_cache_sentinel")?(X={open:!1,ticket:null,loading:!1},e[0]=X):X=e[0];const[a,v]=c.useState(X);let J;e[1]===Symbol.for("react.memo_cache_sentinel")?(J={open:!1,ticketId:null,ticketName:""},e[1]=J):J=e[1];const[f,K]=c.useState(J),[N,Me]=c.useState(""),[Q,Re]=c.useState(!1);let W;e[2]===Symbol.for("react.memo_cache_sentinel")?(W={open:!1,ticketId:null,ticketName:""},e[2]=W):W=e[2];const[b,Y]=c.useState(W),[y,be]=c.useState(""),[Z,$e]=c.useState(!1),T=x?.user?.role==="Administrador";let ee,se;e[3]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{const j=setInterval(async()=>{try{const G=await fetch("/dashboard/tickets");if(G.ok){const he=await G.json();_(he.publicTickets),C(he.myTickets),qe(he.stats)}}catch(G){console.error("Error fetching tickets:",G)}},1e4);return()=>clearInterval(j)},se=[],e[3]=ee,e[4]=se):(ee=e[3],se=e[4]),c.useEffect(ee,se);let te;e[5]===Symbol.for("react.memo_cache_sentinel")?(te=async t=>{v({open:!0,ticket:null,loading:!0});try{const j=await fetch(`/dashboard/ticket/${t}`);if(j.ok){const G=await j.json();v({open:!0,ticket:G,loading:!1})}}catch{v({open:!1,ticket:null,loading:!1})}},e[5]=te):te=e[5];const Ge=te;let ae;e[6]===Symbol.for("react.memo_cache_sentinel")?(ae=(t,j)=>{K({open:!0,ticketId:t,ticketName:j}),Me("")},e[6]=ae):ae=e[6];const Ae=ae;let le;e[7]!==f.ticketId||e[8]!==N?(le=()=>{!f.ticketId||!N||(Re(!0),we.post(`/dashboard/assign-ticket/${f.ticketId}`,{technician_id:N},{onFinish:()=>{Re(!1),K({open:!1,ticketId:null,ticketName:""})}}))},e[7]=f.ticketId,e[8]=N,e[9]=le):le=e[9];const je=le;let ie;e[10]===Symbol.for("react.memo_cache_sentinel")?(ie=(t,j)=>{Y({open:!0,ticketId:t,ticketName:j}),be("")},e[10]=ie):ie=e[10];const Oe=ie;let ce;e[11]!==y||e[12]!==b.ticketId?(ce=()=>{!b.ticketId||!y.trim()||($e(!0),we.post(`/dashboard/solve-ticket/${b.ticketId}`,{solution:y.trim()},{onFinish:()=>{$e(!1),Y({open:!1,ticketId:null,ticketName:""}),be("")}}))},e[11]=y,e[12]=b.ticketId,e[13]=ce):ce=e[13];const ue=ce;let re;e[14]===Symbol.for("react.memo_cache_sentinel")?(re=t=>{k(t),we.post(`/dashboard/take-ticket/${t}`,{},{onFinish:()=>k(null)})},e[14]=re):re=e[14];const Pe=re,Xe=bs,ne=p==="Reportes Públicos"?w:S,h=p==="Reportes Públicos";let oe;e[15]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Ke,{title:"HelpDesk HUV - Dashboard"}),e[15]=oe):oe=e[15];let me;e[16]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Qe,{}),e[16]=me):me=e[16];let I;e[17]!==p?(I=s.jsx(ps,{activeTab:p,onTabChange:u}),e[17]=p,e[18]=I):I=e[18];let M;e[19]!==l.flash?(M=l.flash?.success&&s.jsxs("div",{className:"mx-3 sm:mx-6 mt-4 bg-green-50 border border-green-200 p-3 sm:p-4 flex items-center gap-3",children:[s.jsx(He,{className:"w-5 h-5 text-green-600 shrink-0"}),s.jsx("span",{className:"text-green-700 text-sm sm:text-base",children:l.flash.success})]}),e[19]=l.flash,e[20]=M):M=e[20];let R;e[21]!==l.flash?(R=l.flash?.error&&s.jsxs("div",{className:"mx-3 sm:mx-6 mt-4 bg-red-50 border border-red-200 p-3 sm:p-4 flex items-center gap-3",children:[s.jsx(ls,{className:"w-5 h-5 text-red-600 shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm sm:text-base",children:l.flash.error})]}),e[21]=l.flash,e[22]=R):R=e[22];let $;e[23]!==h?($=h?s.jsx(Be,{className:"w-5 h-5 text-[#2c4370] shrink-0"}):s.jsx(is,{className:"w-5 h-5 text-[#2c4370] shrink-0"}),e[23]=h,e[24]=$):$=e[24];const Ne=h?"Reportes Públicos":"Mis Reportes";let A;e[25]!==Ne?(A=s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800",children:Ne}),e[25]=Ne,e[26]=A):A=e[26];const ye=`text-xs font-medium px-2 py-0.5 sm:px-2.5 sm:py-1 ${h?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,ke=h?`${O.publicUnassigned} pendientes`:`${O.myTickets} activos`;let P;e[27]!==ye||e[28]!==ke?(P=s.jsx("span",{className:ye,children:ke}),e[27]=ye,e[28]=ke,e[29]=P):P=e[29];let F;e[30]!==$||e[31]!==A||e[32]!==P?(F=s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[$,A,P]})}),e[30]=$,e[31]=A,e[32]=P,e[33]=F):F=e[33];let D;e[34]!==ne||e[35]!==T||e[36]!==h||e[37]!==d?(D=ne.length===0?s.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[s.jsx(He,{className:"w-10 h-10 sm:w-12 sm:h-12 text-green-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:h?"No hay reportes públicos pendientes":"No tienes reportes abiertos"})]}):s.jsx("div",{className:"divide-y",children:ne.map(t=>s.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-1 flex-wrap",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:["#",t.id]}),s.jsx("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-0.5 ${Ve[t.priority]}`,children:t.priority_name}),!h&&s.jsx("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-0.5 ${Ee[t.status]}`,children:t.status_name}),t.category_name&&s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-1.5 sm:px-2 py-0.5 hidden sm:inline",children:t.category_name})]}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base line-clamp-2 sm:truncate",children:t.name}),s.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2 hidden sm:block",children:[Xe(t.content).substring(0,150),"..."]}),s.jsx("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Fe,{className:"w-3 h-3"}),new Date(t.date_creation).toLocaleDateString("es-CO",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})]})})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 shrink-0",children:[s.jsxs(n,{variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3",onClick:()=>Ge(t.id),children:[s.jsx(cs,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ver"})]}),h?s.jsxs(s.Fragment,{children:[s.jsxs(n,{onClick:()=>Pe(t.id),disabled:d===t.id,size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white text-xs sm:text-sm px-2 sm:px-3",children:[s.jsx(De,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:d===t.id?"Tomando...":"Tomar"})]}),T&&s.jsxs(n,{size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white text-xs sm:text-sm px-2 sm:px-3",onClick:()=>Ae(t.id,t.name),children:[s.jsx(_e,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Asignar"})]})]}):s.jsxs(n,{onClick:()=>Oe(t.id,t.name),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm px-2 sm:px-3",children:[s.jsx(ze,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Resolver"})]})]})]})},t.id))}),e[34]=ne,e[35]=T,e[36]=h,e[37]=d,e[38]=D):D=e[38];let U;e[39]!==F||e[40]!==D?(U=s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"bg-white shadow-sm border border-gray-200",children:[F,D]})}),e[39]=F,e[40]=D,e[41]=U):U=e[41];let H;e[42]!==O?(H=s.jsx(gs,{stats:O}),e[42]=O,e[43]=H):H=e[43];let L;e[44]!==U||e[45]!==H?(L=s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 p-3 sm:p-4",children:[U,H]}),e[44]=U,e[45]=H,e[46]=L):L=e[46];let z;e[47]!==I||e[48]!==M||e[49]!==R||e[50]!==L?(z=s.jsxs("main",{className:"flex-1 bg-gray-50",children:[I,M,R,L]}),e[47]=I,e[48]=M,e[49]=R,e[50]=L,e[51]=z):z=e[51];let xe;e[52]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(We,{}),e[52]=xe):xe=e[52];let V;e[53]!==z?(V=s.jsxs("div",{className:"min-h-screen flex flex-col",children:[me,z,xe]}),e[53]=z,e[54]=V):V=e[54];let E;e[55]!==a.loading||e[56]!==a.open||e[57]!==a.ticket||e[58]!==T?(E=a.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Detalles del Caso"}),s.jsx("button",{onClick:()=>v({open:!1,ticket:null,loading:!1}),className:"p-1 hover:bg-gray-100",children:s.jsx(Se,{className:"w-5 h-5"})})]}),a.loading?s.jsx("div",{className:"p-12 flex items-center justify-center",children:s.jsx(Ce,{className:"w-8 h-8 animate-spin text-[#2c4370]"})}):a.ticket&&s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:["#",a.ticket.id]}),s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 ${Ve[a.ticket.priority]}`,children:a.ticket.priority_name}),s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 ${Ee[a.ticket.status]}`,children:a.ticket.status_name})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a.ticket.name}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.ticket.category_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:a.ticket.category_name})]}),a.ticket.location_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:a.ticket.location_name})]}),a.ticket.assigned_tech&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:a.ticket.assigned_tech})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fe,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:new Date(a.ticket.date_creation).toLocaleString("es-CO")})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Descripción"}),s.jsx("div",{className:"prose prose-sm max-w-none text-gray-600 bg-gray-50 p-4 border border-gray-200",dangerouslySetInnerHTML:{__html:a.ticket.content}})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(n,{variant:"outline",onClick:()=>v({open:!1,ticket:null,loading:!1}),children:"Cerrar"}),a.ticket.status===1&&s.jsxs(s.Fragment,{children:[s.jsxs(n,{onClick:()=>{v({open:!1,ticket:null,loading:!1}),Pe(a.ticket.id)},className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:[s.jsx(De,{className:"w-4 h-4 mr-1"}),"Tomar"]}),T&&s.jsxs(n,{className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",onClick:()=>{v({open:!1,ticket:null,loading:!1}),Ae(a.ticket.id,a.ticket.name)},children:[s.jsx(_e,{className:"w-4 h-4 mr-1"}),"Asignar"]})]})]})]})]})}),e[55]=a.loading,e[56]=a.open,e[57]=a.ticket,e[58]=T,e[59]=E):E=e[59];let B;e[60]!==f.open||e[61]!==f.ticketName||e[62]!==je||e[63]!==Q||e[64]!==N||e[65]!==r?(B=f.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white shadow-xl max-w-md w-full border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Asignar Caso"}),s.jsx("button",{onClick:()=>K({open:!1,ticketId:null,ticketName:""}),className:"p-1 hover:bg-gray-100",children:s.jsx(Se,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Asignar el caso ",s.jsxs("strong",{children:['"',f.ticketName,'"']})," a:"]}),s.jsxs(Ze,{value:N,onValueChange:Me,children:[s.jsx(es,{className:"w-full",children:s.jsx(ss,{placeholder:"Seleccionar técnico..."})}),s.jsx(ts,{children:r?.map(fs)})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[s.jsx(n,{variant:"outline",onClick:()=>K({open:!1,ticketId:null,ticketName:""}),children:"Cancelar"}),s.jsx(n,{onClick:je,disabled:!N||Q,className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:Q?s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"w-4 h-4 mr-1 animate-spin"}),"Asignando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_e,{className:"w-4 h-4 mr-1"}),"Asignar"]})})]})]})}),e[60]=f.open,e[61]=f.ticketName,e[62]=je,e[63]=Q,e[64]=N,e[65]=r,e[66]=B):B=e[66];let q;e[67]!==y||e[68]!==b.open||e[69]!==b.ticketName||e[70]!==ue||e[71]!==Z?(q=b.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white shadow-xl max-w-lg w-full border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Resolver Caso"}),s.jsx("button",{onClick:()=>Y({open:!1,ticketId:null,ticketName:""}),className:"p-1 hover:bg-gray-100",children:s.jsx(Se,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Resolver el caso ",s.jsxs("strong",{children:['"',b.ticketName,'"']})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descripción de la solución ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:y,onChange:t=>be(t.target.value),placeholder:"Describe cómo se resolvió el problema...",className:"w-full px-3 py-2 border focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 min-h-[120px]",autoFocus:!0})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[s.jsx(n,{variant:"outline",onClick:()=>Y({open:!1,ticketId:null,ticketName:""}),children:"Cancelar"}),s.jsx(n,{onClick:ue,disabled:!y.trim()||Z,className:"bg-green-600 hover:bg-green-700 text-white",children:Z?s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"w-4 h-4 mr-1 animate-spin"}),"Resolviendo..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ze,{className:"w-4 h-4 mr-1"}),"Resolver"]})})]})]})}),e[67]=y,e[68]=b.open,e[69]=b.ticketName,e[70]=ue,e[71]=Z,e[72]=q):q=e[72];let de;return e[73]!==V||e[74]!==E||e[75]!==B||e[76]!==q?(de=s.jsxs(s.Fragment,{children:[oe,V,E,B,q]}),e[73]=V,e[74]=E,e[75]=B,e[76]=q,e[77]=de):de=e[77],de}function fs(o){return s.jsx(as,{value:o.id.toString(),children:o.name},o.id)}function bs(o){const e=document.createElement("div");return e.innerHTML=o,e.textContent||e.innerText||""}export{Ls as default};
