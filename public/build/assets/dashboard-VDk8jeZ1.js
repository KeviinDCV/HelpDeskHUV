import{c as Ie,j as s,L as we,u as Ye,a as n,r as _e,H as Ze}from"./app-BH5_cti_.js";import{T as Xe,C as He,U as ze,G as es,a as ss}from"./glpi-footer-CzJJeusO.js";import{C as pe,a as fe,b as be,c as Ee}from"./card-CAp2yFLE.js";import{a as Me,B as o}from"./button-C0S2ipyA.js";import{C as ts,U as Se}from"./users-DrYD-rBJ.js";import{S as as,a as ls,b as is,c as cs,d as ns}from"./select-gTy9-tAq.js";import{C as Ve,T as rs,F as os}from"./triangle-alert-D16nQTcE.js";import{E as ms}from"./eye-DhQOQ4c3.js";import{X as Ce}from"./index-DbqM67Sd.js";import{L as Te}from"./loader-circle-DSv805cn.js";import{T as xs}from"./tag-Bu_F1dZE.js";import{M as ds}from"./map-pin-XLJXzgj7.js";import{U as hs}from"./user-BV2ujFoQ.js";/* empty css            */import"./dialog-Bw6f61JI.js";import"./input-Dz1kJnF2.js";import"./monitor-aypA44_X.js";import"./index-Di5D0bt_.js";import"./index-B-AUKp0Z.js";import"./index-Dqx5sBfX.js";import"./check-CvBili9v.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Be=Me("Pin",gs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qe=Me("SquareCheckBig",ps);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],bs=Me("UserCheck",fs);function js(m){const e=Ie.c(20),{stats:i}=m;let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(pe,{className:"pb-2 px-3 sm:px-6",children:s.jsx(fe,{className:"text-sm font-semibold text-[#2c5599]",children:"Resumen"})}),e[0]=p):p=e[0];let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(Xe,{className:"w-5 h-5 lg:w-4 lg:h-4 text-red-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Sin asignar"})]}),e[1]=x):x=e[1];let r;e[2]!==i.publicUnassigned?(r=s.jsx(we,{href:"/soporte/casos?filter=unassigned",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-red-50 hover:bg-red-100 transition-colors cursor-pointer text-center lg:text-left",children:[x,s.jsx("span",{className:"font-bold text-red-600 text-lg lg:text-base",children:i.publicUnassigned})]})}),e[2]=i.publicUnassigned,e[3]=r):r=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(bs,{className:"w-5 h-5 lg:w-4 lg:h-4 text-blue-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Mis casos"})]}),e[4]=d):d=e[4];let l;e[5]!==i.myTickets?(l=s.jsx(we,{href:"/soporte/casos?filter=my_cases",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-blue-50 hover:bg-blue-100 transition-colors cursor-pointer text-center lg:text-left",children:[d,s.jsx("span",{className:"font-bold text-blue-600 text-lg lg:text-base",children:i.myTickets})]})}),e[5]=i.myTickets,e[6]=l):l=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-1 lg:gap-2",children:[s.jsx(ts,{className:"w-5 h-5 lg:w-4 lg:h-4 text-green-500"}),s.jsx("span",{className:"text-xs lg:text-sm text-gray-700",children:"Resueltos"})]}),e[7]=f):f=e[7];let u;e[8]!==i.resolvedToday?(u=s.jsx(we,{href:"/soporte/casos?filter=resolved_today",className:"block",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between p-2 bg-green-50 hover:bg-green-100 transition-colors cursor-pointer text-center lg:text-left",children:[f,s.jsx("span",{className:"font-bold text-green-600 text-lg lg:text-base",children:i.resolvedToday})]})}),e[8]=i.resolvedToday,e[9]=u):u=e[9];let h;e[10]!==r||e[11]!==l||e[12]!==u?(h=s.jsxs(be,{className:"bg-white border shadow-sm",children:[p,s.jsx(Ee,{className:"px-3 sm:px-6",children:s.jsxs("div",{className:"grid grid-cols-3 lg:grid-cols-1 gap-2 lg:space-y-3 lg:gap-0",children:[r,l,u]})})]}),e[10]=r,e[11]=l,e[12]=u,e[13]=h):h=e[13];let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(pe,{className:"pb-3",children:s.jsx(fe,{className:"text-sm font-semibold text-center text-[#2c5599]",children:"Su planeación"})}),e[14]=k):k=e[14];let w;e[15]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs(be,{className:"bg-gray-100 border-gray-300",children:[k,s.jsx(Ee,{children:s.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"No hay eventos para mostrar"})})]}),e[15]=w):w=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(be,{className:"bg-gray-100 border-gray-300",children:s.jsx(pe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-sm font-semibold text-[#2c5599] flex-1 text-center",children:"Recordatorios personales"}),s.jsx(Be,{className:"h-4 w-4 text-gray-500"})]})})}),e[16]=_):_=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("div",{className:"hidden lg:block space-y-4",children:[w,_,s.jsx(be,{className:"bg-gray-100 border-gray-300",children:s.jsx(pe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-sm font-semibold text-[#2c5599] flex-1 text-center",children:"Recordatorios públicos"}),s.jsx(Be,{className:"h-4 w-4 text-gray-500"})]})})})]}),e[17]=S):S=e[17];let C;return e[18]!==h?(C=s.jsxs("div",{className:"w-full lg:w-80 space-y-4",children:[h,S]}),e[18]=h,e[19]=C):C=e[19],C}function us(m){const e=Ie.c(4),{activeTab:i,onTabChange:p}=m;let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x=["Reportes Públicos","Mis Reportes"],e[0]=x):x=e[0];const r=x;let d;return e[1]!==i||e[2]!==p?(d=s.jsx("div",{className:"px-3 sm:px-6 pt-4 sm:pt-6 pb-2 sm:pb-4",children:s.jsx("div",{className:"bg-white shadow-sm border border-gray-200 inline-flex w-full sm:w-auto",children:r.map(l=>s.jsx(o,{variant:"ghost",onClick:()=>p(l),className:`flex-1 sm:flex-initial px-3 sm:px-6 py-2 sm:py-2.5 text-xs sm:text-sm font-medium transition-colors ${i===l?"bg-[#2c4370] text-white hover:bg-[#2c4370]":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:l},l))})}),e[1]=i,e[2]=p,e[3]=d):d=e[3],d}const Ge={1:"bg-gray-100 text-gray-600",2:"bg-blue-100 text-blue-600",3:"bg-yellow-100 text-yellow-700",4:"bg-orange-100 text-orange-600",5:"bg-red-100 text-red-600",6:"bg-red-200 text-red-700"},Oe={1:"bg-blue-100 text-blue-700",2:"bg-yellow-100 text-yellow-700",3:"bg-purple-100 text-purple-700",4:"bg-orange-100 text-orange-700",5:"bg-green-100 text-green-700",6:"bg-gray-100 text-gray-600"};function Bs(m){const e=Ie.c(78),{publicTickets:i,myTickets:p,stats:x,technicians:r,auth:d}=m,{props:l}=Ye(),[f,u]=n.useState("Reportes Públicos"),[h,k]=n.useState(null),[w,_]=n.useState(i),[S,C]=n.useState(p),[O,Je]=n.useState(x);let X;e[0]===Symbol.for("react.memo_cache_sentinel")?(X={open:!1,ticket:null,loading:!1},e[0]=X):X=e[0];const[a,v]=n.useState(X);let J;e[1]===Symbol.for("react.memo_cache_sentinel")?(J={open:!1,ticketId:null,ticketName:""},e[1]=J):J=e[1];const[b,K]=n.useState(J),[N,Re]=n.useState(""),[Q,Ae]=n.useState(!1);let W;e[2]===Symbol.for("react.memo_cache_sentinel")?(W={open:!1,ticketId:null,ticketName:""},e[2]=W):W=e[2];const[j,Y]=n.useState(W),[y,je]=n.useState(""),[Z,Pe]=n.useState(!1),T=d?.user?.role==="Administrador";let ee,se;e[3]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{let t=null,c=null;const he=async()=>{if(document.visibilityState==="visible"){c&&c.abort(),c=new AbortController;try{const ge=await fetch("/dashboard/tickets",{signal:c.signal});if(ge.ok){const G=await ge.json();_(G.publicTickets),C(G.myTickets),Je(G.stats)}}catch(ge){const G=ge;if(G instanceof Error&&G.name==="AbortError")return}}},Le=()=>{t||(t=setInterval(he,3e4))},De=()=>{t&&(clearInterval(t),t=null),c&&(c.abort(),c=null)},Ue=()=>{document.visibilityState==="visible"?(he(),Le()):De()};return Le(),document.addEventListener("visibilitychange",Ue),()=>{De(),document.removeEventListener("visibilitychange",Ue)}},se=[],e[3]=ee,e[4]=se):(ee=e[3],se=e[4]),n.useEffect(ee,se);let te;e[5]===Symbol.for("react.memo_cache_sentinel")?(te=async t=>{v({open:!0,ticket:null,loading:!0});try{const c=await fetch(`/dashboard/ticket/${t}`);if(c.ok){const he=await c.json();v({open:!0,ticket:he,loading:!1})}}catch{v({open:!1,ticket:null,loading:!1})}},e[5]=te):te=e[5];const Ke=te;let ae;e[6]===Symbol.for("react.memo_cache_sentinel")?(ae=(t,c)=>{K({open:!0,ticketId:t,ticketName:c}),Re("")},e[6]=ae):ae=e[6];const $e=ae;let le;e[7]!==b.ticketId||e[8]!==N?(le=()=>{!b.ticketId||!N||(Ae(!0),_e.post(`/dashboard/assign-ticket/${b.ticketId}`,{technician_id:N},{onFinish:()=>{Ae(!1),K({open:!1,ticketId:null,ticketName:""})}}))},e[7]=b.ticketId,e[8]=N,e[9]=le):le=e[9];const ue=le;let ie;e[10]===Symbol.for("react.memo_cache_sentinel")?(ie=(t,c)=>{Y({open:!0,ticketId:t,ticketName:c}),je("")},e[10]=ie):ie=e[10];const Qe=ie;let ce;e[11]!==y||e[12]!==j.ticketId?(ce=()=>{!j.ticketId||!y.trim()||(Pe(!0),_e.post(`/dashboard/solve-ticket/${j.ticketId}`,{solution:y.trim()},{onFinish:()=>{Pe(!1),Y({open:!1,ticketId:null,ticketName:""}),je("")}}))},e[11]=y,e[12]=j.ticketId,e[13]=ce):ce=e[13];const Ne=ce;let ne;e[14]===Symbol.for("react.memo_cache_sentinel")?(ne=t=>{k(t),_e.post(`/dashboard/take-ticket/${t}`,{},{onFinish:()=>k(null)})},e[14]=ne):ne=e[14];const Fe=ne,We=ys,re=f==="Reportes Públicos"?w:S,g=f==="Reportes Públicos";let oe;e[15]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Ze,{title:"HelpDesk HUV - Dashboard"}),e[15]=oe):oe=e[15];let me;e[16]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(es,{}),e[16]=me):me=e[16];let I;e[17]!==f?(I=s.jsx(us,{activeTab:f,onTabChange:u}),e[17]=f,e[18]=I):I=e[18];let M;e[19]!==l.flash?(M=l.flash?.success&&s.jsxs("div",{className:"mx-3 sm:mx-6 mt-4 bg-green-50 border border-green-200 p-3 sm:p-4 flex items-center gap-3",children:[s.jsx(Ve,{className:"w-5 h-5 text-green-600 shrink-0"}),s.jsx("span",{className:"text-green-700 text-sm sm:text-base",children:l.flash.success})]}),e[19]=l.flash,e[20]=M):M=e[20];let R;e[21]!==l.flash?(R=l.flash?.error&&s.jsxs("div",{className:"mx-3 sm:mx-6 mt-4 bg-red-50 border border-red-200 p-3 sm:p-4 flex items-center gap-3",children:[s.jsx(rs,{className:"w-5 h-5 text-red-600 shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm sm:text-base",children:l.flash.error})]}),e[21]=l.flash,e[22]=R):R=e[22];let A;e[23]!==g?(A=g?s.jsx(Xe,{className:"w-5 h-5 text-[#2c4370] shrink-0"}):s.jsx(os,{className:"w-5 h-5 text-[#2c4370] shrink-0"}),e[23]=g,e[24]=A):A=e[24];const ye=g?"Reportes Públicos":"Mis Reportes";let P;e[25]!==ye?(P=s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800",children:ye}),e[25]=ye,e[26]=P):P=e[26];const ke=`text-xs font-medium px-2 py-0.5 sm:px-2.5 sm:py-1 ${g?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,ve=g?`${O.publicUnassigned} pendientes`:`${O.myTickets} activos`;let $;e[27]!==ke||e[28]!==ve?($=s.jsx("span",{className:ke,children:ve}),e[27]=ke,e[28]=ve,e[29]=$):$=e[29];let F;e[30]!==A||e[31]!==P||e[32]!==$?(F=s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[A,P,$]})}),e[30]=A,e[31]=P,e[32]=$,e[33]=F):F=e[33];let L;e[34]!==re||e[35]!==T||e[36]!==g||e[37]!==h?(L=re.length===0?s.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[s.jsx(Ve,{className:"w-10 h-10 sm:w-12 sm:h-12 text-green-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:g?"No hay reportes públicos pendientes":"No tienes reportes abiertos"})]}):s.jsx("div",{className:"divide-y",children:re.map(t=>s.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-1 flex-wrap",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:["#",t.id]}),s.jsx("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-0.5 ${Ge[t.priority]}`,children:t.priority_name}),!g&&s.jsx("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-0.5 ${Oe[t.status]}`,children:t.status_name}),t.category_name&&s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-1.5 sm:px-2 py-0.5 hidden sm:inline",children:t.category_name})]}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base line-clamp-2 sm:truncate",children:t.name}),s.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2 hidden sm:block",children:[We(t.content).substring(0,150),"..."]}),s.jsx("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(He,{className:"w-3 h-3"}),new Date(t.date_creation).toLocaleDateString("es-CO",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})]})})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 shrink-0",children:[s.jsxs(o,{variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3",onClick:()=>Ke(t.id),children:[s.jsx(ms,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ver"})]}),g?s.jsxs(s.Fragment,{children:[s.jsxs(o,{onClick:()=>Fe(t.id),disabled:h===t.id,size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white text-xs sm:text-sm px-2 sm:px-3",children:[s.jsx(ze,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:h===t.id?"Tomando...":"Tomar"})]}),T&&s.jsxs(o,{size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white text-xs sm:text-sm px-2 sm:px-3",onClick:()=>$e(t.id,t.name),children:[s.jsx(Se,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Asignar"})]})]}):s.jsxs(o,{onClick:()=>Qe(t.id,t.name),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm px-2 sm:px-3",children:[s.jsx(qe,{className:"w-4 h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Resolver"})]})]})]})},t.id))}),e[34]=re,e[35]=T,e[36]=g,e[37]=h,e[38]=L):L=e[38];let D;e[39]!==F||e[40]!==L?(D=s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"bg-white shadow-sm border border-gray-200",children:[F,L]})}),e[39]=F,e[40]=L,e[41]=D):D=e[41];let U;e[42]!==O?(U=s.jsx(js,{stats:O}),e[42]=O,e[43]=U):U=e[43];let H;e[44]!==D||e[45]!==U?(H=s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 p-3 sm:p-4",children:[D,U]}),e[44]=D,e[45]=U,e[46]=H):H=e[46];let z;e[47]!==I||e[48]!==M||e[49]!==R||e[50]!==H?(z=s.jsxs("main",{className:"flex-1 bg-gray-50",children:[I,M,R,H]}),e[47]=I,e[48]=M,e[49]=R,e[50]=H,e[51]=z):z=e[51];let xe;e[52]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(ss,{}),e[52]=xe):xe=e[52];let E;e[53]!==z?(E=s.jsxs("div",{className:"min-h-screen flex flex-col",children:[me,z,xe]}),e[53]=z,e[54]=E):E=e[54];let V;e[55]!==a.loading||e[56]!==a.open||e[57]!==a.ticket||e[58]!==T?(V=a.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Detalles del Caso"}),s.jsx("button",{onClick:()=>v({open:!1,ticket:null,loading:!1}),className:"p-1 hover:bg-gray-100",children:s.jsx(Ce,{className:"w-5 h-5"})})]}),a.loading?s.jsx("div",{className:"p-12 flex items-center justify-center",children:s.jsx(Te,{className:"w-8 h-8 animate-spin text-[#2c4370]"})}):a.ticket&&s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:["#",a.ticket.id]}),s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 ${Ge[a.ticket.priority]}`,children:a.ticket.priority_name}),s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 ${Oe[a.ticket.status]}`,children:a.ticket.status_name})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a.ticket.name}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.ticket.category_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:a.ticket.category_name})]}),a.ticket.location_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ds,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:a.ticket.location_name})]}),a.ticket.assigned_tech&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:a.ticket.assigned_tech})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(He,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:new Date(a.ticket.date_creation).toLocaleString("es-CO")})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Descripción"}),s.jsx("div",{className:"prose prose-sm max-w-none text-gray-600 bg-gray-50 p-4 border border-gray-200",dangerouslySetInnerHTML:{__html:a.ticket.content}})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(o,{variant:"outline",onClick:()=>v({open:!1,ticket:null,loading:!1}),children:"Cerrar"}),a.ticket.status===1&&s.jsxs(s.Fragment,{children:[s.jsxs(o,{onClick:()=>{v({open:!1,ticket:null,loading:!1}),Fe(a.ticket.id)},className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:[s.jsx(ze,{className:"w-4 h-4 mr-1"}),"Tomar"]}),T&&s.jsxs(o,{className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",onClick:()=>{v({open:!1,ticket:null,loading:!1}),$e(a.ticket.id,a.ticket.name)},children:[s.jsx(Se,{className:"w-4 h-4 mr-1"}),"Asignar"]})]})]})]})]})}),e[55]=a.loading,e[56]=a.open,e[57]=a.ticket,e[58]=T,e[59]=V):V=e[59];let B;e[60]!==b.open||e[61]!==b.ticketName||e[62]!==ue||e[63]!==Q||e[64]!==N||e[65]!==r?(B=b.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white shadow-xl max-w-md w-full border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Asignar Caso"}),s.jsx("button",{onClick:()=>K({open:!1,ticketId:null,ticketName:""}),className:"p-1 hover:bg-gray-100",children:s.jsx(Ce,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Asignar el caso ",s.jsxs("strong",{children:['"',b.ticketName,'"']})," a:"]}),s.jsxs(as,{value:N,onValueChange:Re,children:[s.jsx(ls,{className:"w-full",children:s.jsx(is,{placeholder:"Seleccionar técnico..."})}),s.jsx(cs,{children:r?.map(Ns)})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[s.jsx(o,{variant:"outline",onClick:()=>K({open:!1,ticketId:null,ticketName:""}),children:"Cancelar"}),s.jsx(o,{onClick:ue,disabled:!N||Q,className:"bg-[#2c4370] hover:bg-[#3d5583] text-white",children:Q?s.jsxs(s.Fragment,{children:[s.jsx(Te,{className:"w-4 h-4 mr-1 animate-spin"}),"Asignando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Se,{className:"w-4 h-4 mr-1"}),"Asignar"]})})]})]})}),e[60]=b.open,e[61]=b.ticketName,e[62]=ue,e[63]=Q,e[64]=N,e[65]=r,e[66]=B):B=e[66];let q;e[67]!==y||e[68]!==j.open||e[69]!==j.ticketName||e[70]!==Ne||e[71]!==Z?(q=j.open&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white shadow-xl max-w-lg w-full border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Resolver Caso"}),s.jsx("button",{onClick:()=>Y({open:!1,ticketId:null,ticketName:""}),className:"p-1 hover:bg-gray-100",children:s.jsx(Ce,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Resolver el caso ",s.jsxs("strong",{children:['"',j.ticketName,'"']})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descripción de la solución ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:y,onChange:t=>je(t.target.value),placeholder:"Describe cómo se resolvió el problema...",className:"w-full px-3 py-2 border focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 min-h-[120px]",autoFocus:!0})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[s.jsx(o,{variant:"outline",onClick:()=>Y({open:!1,ticketId:null,ticketName:""}),children:"Cancelar"}),s.jsx(o,{onClick:Ne,disabled:!y.trim()||Z,className:"bg-green-600 hover:bg-green-700 text-white",children:Z?s.jsxs(s.Fragment,{children:[s.jsx(Te,{className:"w-4 h-4 mr-1 animate-spin"}),"Resolviendo..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qe,{className:"w-4 h-4 mr-1"}),"Resolver"]})})]})]})}),e[67]=y,e[68]=j.open,e[69]=j.ticketName,e[70]=Ne,e[71]=Z,e[72]=q):q=e[72];let de;return e[73]!==E||e[74]!==V||e[75]!==B||e[76]!==q?(de=s.jsxs(s.Fragment,{children:[oe,E,V,B,q]}),e[73]=E,e[74]=V,e[75]=B,e[76]=q,e[77]=de):de=e[77],de}function Ns(m){return s.jsx(ns,{value:m.id.toString(),children:m.name},m.id)}function ys(m){const e=document.createElement("div");return e.innerHTML=m,e.textContent||e.innerText||""}export{Bs as default};
