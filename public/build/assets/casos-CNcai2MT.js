import{c as al,R as h,j as s,r as w,H as rl,L as Gt}from"./app-D21ZKt9j.js";import{G as il,S as nl,c as cl,a as ol}from"./glpi-footer-BXsRifTn.js";import{F as Kt,T as _,b as Et,c as v,a as dl,d as ml,e as xl}from"./table-BNhz5NVI.js";import{B as x}from"./button-DSGNlCK_.js";import{I as rt}from"./input-CRVQWDEx.js";import{D as At,b as zt,a as Qt,c as Xt,d as Rt,e as $t}from"./dialog-D4OVQB9G.js";import{S as cs,a as os,b as ds,c as ms,d as n}from"./select-DN9SH_Pw.js";import{X as Yt}from"./index-Cb3z_cva.js";import{S as it}from"./square-check-big-Er9_hKpj.js";import{C as hl,a as fl}from"./chevrons-up-down-rm2qVhXv.js";import{A as gl,a as pl,C as ul}from"./chevron-left-BX6wkqD_.js";import{S as jl}from"./square-pen-mv09dgY2.js";import{L as yl}from"./loader-circle-BVFyQAEL.js";/* empty css            */import"./file-text-BgXHh55F.js";import"./monitor-BUdljYyH.js";import"./index-CY6a7LjI.js";import"./index-gvRCCRpZ.js";import"./index-0EqzJDAK.js";import"./check-Ag10Bali.js";function Bl(j){const e=al.c(337),{tickets:r,categories:nt,technicians:ct,filters:t,auth:m}=j,[S,Lt]=h.useState(t.search||""),[ot,xs]=h.useState(!1),[k,Ot]=h.useState(null),[dt,is]=h.useState(!1),[i,Jt]=h.useState(null),[E,Wt]=h.useState(!1),[mt,hs]=h.useState(!1),[A,xt]=h.useState(null),[C,fs]=h.useState(""),[z,gs]=h.useState(""),[D,ht]=h.useState(!1),[f,Pt]=h.useState(t.status||"all"),[g,Vt]=h.useState(t.priority||"all"),[p,Ht]=h.useState(t.category||"all"),[u,It]=h.useState(t.assigned||"all"),[b,Mt]=h.useState(t.date_from||""),[N,qt]=h.useState(t.date_to||""),F=f&&f!=="all"||g&&g!=="all"||p&&p!=="all"||u&&u!=="all"||b||N||t.filter;let ps;e[0]!==t.filter?(ps=()=>{switch(t.filter){case"unassigned":return"Sin asignar";case"my_cases":return"Mis casos";case"my_pending":return"Sin resolver";case"my_resolved":return"Resueltos";default:return null}},e[0]=t.filter,e[1]=ps):ps=e[1];const us=ps;let js;e[2]!==t.direction||e[3]!==t.per_page||e[4]!==t.sort?(js=()=>{w.get("/soporte/casos",{per_page:t.per_page,sort:t.sort,direction:t.direction},{preserveState:!1})},e[2]=t.direction,e[3]=t.per_page,e[4]=t.sort,e[5]=js):js=e[5];const ft=js;let ys;e[6]!==m.user.id||e[7]!==m.user.role?(ys=l=>m.user.role==="Administrador"?!0:m.user.role==="Técnico"?l.assigned_user_id===m.user.id||l.requester_user_id===m.user.id:!1,e[6]=m.user.id,e[7]=m.user.role,e[8]=ys):ys=e[8];const ns=ys;let vs;e[9]!==m.user.role?(vs=()=>m.user.role==="Administrador"||m.user.role==="Técnico",e[9]=m.user.role,e[10]=vs):vs=e[10];const y=vs;let bs;e[11]!==m.user.id||e[12]!==m.user.role?(bs=l=>m.user.role==="Administrador"?!0:l.assigned_user_id===m.user.id&&l.status!==5&&l.status!==6,e[11]=m.user.id,e[12]=m.user.role,e[13]=bs):bs=e[13];const T=bs;let Ns;e[14]===Symbol.for("react.memo_cache_sentinel")?(Ns=l=>{xt(l),fs("");const a=new Date,d=a.getFullYear(),kt=String(a.getMonth()+1).padStart(2,"0"),el=String(a.getDate()).padStart(2,"0"),sl=String(a.getHours()).padStart(2,"0"),tl=String(a.getMinutes()).padStart(2,"0"),ll=`${d}-${kt}-${el}T${sl}:${tl}`;gs(ll),hs(!0)},e[14]=Ns):Ns=e[14];const Bt=Ns;let _s;e[15]!==C||e[16]!==z||e[17]!==A?(_s=()=>{!A||!C.trim()||(ht(!0),w.post(`/dashboard/solve-ticket/${A.id}`,{solution:C.trim(),solve_date:z||void 0},{preserveScroll:!0,onSuccess:()=>{ht(!1),hs(!1),xt(null),fs(""),gs("")},onError:()=>{ht(!1)}}))},e[15]=C,e[16]=z,e[17]=A,e[18]=_s):_s=e[18];const gt=_s;let Ss;e[19]===Symbol.for("react.memo_cache_sentinel")?(Ss=l=>{Ot(l),xs(!0)},e[19]=Ss):Ss=e[19];const Zt=Ss;let ws;e[20]!==k?(ws=()=>{k&&w.delete(`/soporte/casos/${k.id}`,{preserveScroll:!0,onSuccess:()=>{xs(!1),Ot(null)}})},e[20]=k,e[21]=ws):ws=e[21];const pt=ws;let Cs;e[22]!==t.assigned||e[23]!==t.category||e[24]!==t.date_from||e[25]!==t.date_to||e[26]!==t.direction||e[27]!==t.filter||e[28]!==t.per_page||e[29]!==t.priority||e[30]!==t.search||e[31]!==t.sort||e[32]!==t.status?(Cs=l=>{const a=t.sort===l&&t.direction==="asc"?"desc":"asc",d={per_page:t.per_page,sort:l,direction:a};t.search&&(d.search=t.search),t.status&&(d.status=t.status),t.priority&&(d.priority=t.priority),t.category&&(d.category=t.category),t.assigned&&(d.assigned=t.assigned),t.date_from&&(d.date_from=t.date_from),t.date_to&&(d.date_to=t.date_to),t.filter&&(d.filter=t.filter),w.get("/soporte/casos",d,{preserveState:!1,preserveScroll:!0})},e[22]=t.assigned,e[23]=t.category,e[24]=t.date_from,e[25]=t.date_to,e[26]=t.direction,e[27]=t.filter,e[28]=t.per_page,e[29]=t.priority,e[30]=t.search,e[31]=t.sort,e[32]=t.status,e[33]=Cs):Cs=e[33];const c=Cs,ut=_l;let Ds;e[34]!==u||e[35]!==p||e[36]!==b||e[37]!==N||e[38]!==t.direction||e[39]!==t.per_page||e[40]!==t.sort||e[41]!==g||e[42]!==S||e[43]!==f?(Ds=()=>{const l={per_page:t.per_page,sort:t.sort,direction:t.direction,page:1};S&&(l.search=S),f&&f!=="all"&&(l.status=f),g&&g!=="all"&&(l.priority=g),p&&p!=="all"&&(l.category=p),u&&u!=="all"&&(l.assigned=u),b&&(l.date_from=b),N&&(l.date_to=N),w.get("/soporte/casos",l,{preserveState:!1,preserveScroll:!1,replace:!0})},e[34]=u,e[35]=p,e[36]=b,e[37]=N,e[38]=t.direction,e[39]=t.per_page,e[40]=t.sort,e[41]=g,e[42]=S,e[43]=f,e[44]=Ds):Ds=e[44];const R=Ds;let Ts;e[45]!==t.assigned||e[46]!==t.category||e[47]!==t.date_from||e[48]!==t.date_to||e[49]!==t.direction||e[50]!==t.filter||e[51]!==t.priority||e[52]!==t.search||e[53]!==t.sort||e[54]!==t.status?(Ts=l=>{const a={per_page:l,sort:t.sort,direction:t.direction,page:1};t.search&&(a.search=t.search),t.status&&(a.status=t.status),t.priority&&(a.priority=t.priority),t.category&&(a.category=t.category),t.assigned&&(a.assigned=t.assigned),t.date_from&&(a.date_from=t.date_from),t.date_to&&(a.date_to=t.date_to),t.filter&&(a.filter=t.filter),w.get("/soporte/casos",a,{preserveState:!1,preserveScroll:!0})},e[45]=t.assigned,e[46]=t.category,e[47]=t.date_from,e[48]=t.date_to,e[49]=t.direction,e[50]=t.filter,e[51]=t.priority,e[52]=t.search,e[53]=t.sort,e[54]=t.status,e[55]=Ts):Ts=e[55];const jt=Ts;let Fs;e[56]!==u||e[57]!==p||e[58]!==b||e[59]!==N||e[60]!==t.direction||e[61]!==t.per_page||e[62]!==t.sort||e[63]!==g||e[64]!==S||e[65]!==f?(Fs=()=>{const l={per_page:t.per_page,sort:t.sort,direction:t.direction,page:1};S&&(l.search=S),f&&f!=="all"&&(l.status=f),g&&g!=="all"&&(l.priority=g),p&&p!=="all"&&(l.category=p),u&&u!=="all"&&(l.assigned=u),b&&(l.date_from=b),N&&(l.date_to=N),console.log("Applying filters:",l),w.get("/soporte/casos",l,{preserveState:!1,preserveScroll:!1,replace:!0})},e[56]=u,e[57]=p,e[58]=b,e[59]=N,e[60]=t.direction,e[61]=t.per_page,e[62]=t.sort,e[63]=g,e[64]=S,e[65]=f,e[66]=Fs):Fs=e[66];const yt=Fs;let ks;e[67]!==t.direction||e[68]!==t.per_page||e[69]!==t.sort?(ks=()=>{Pt("all"),Vt("all"),Ht("all"),It("all"),Mt(""),qt(""),Lt(""),w.get("/soporte/casos",{per_page:t.per_page,sort:t.sort,direction:t.direction,page:1},{preserveState:!1,preserveScroll:!1,replace:!0})},e[67]=t.direction,e[68]=t.per_page,e[69]=t.sort,e[70]=ks):ks=e[70];const vt=ks;let Es;e[71]!==t.direction||e[72]!==t.sort?(Es=l=>t.sort!==l?s.jsx(hl,{className:"h-3 w-3 ml-1 text-gray-400"}):t.direction==="asc"?s.jsx(gl,{className:"h-3 w-3 ml-1 text-[#2c4370]"}):s.jsx(pl,{className:"h-3 w-3 ml-1 text-[#2c4370]"}),e[71]=t.direction,e[72]=t.sort,e[73]=Es):Es=e[73];const o=Es,Ut=Nl;let As;e[74]===Symbol.for("react.memo_cache_sentinel")?(As=s.jsx(rl,{title:"HelpDesk HUV - Casos"}),e[74]=As):As=e[74];let zs;e[75]===Symbol.for("react.memo_cache_sentinel")?(zs=s.jsx(il,{breadcrumb:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Gt,{href:"/dashboard",className:"text-gray-600 hover:text-[#2c4370] hover:underline",children:"Inicio"}),s.jsx("span",{className:"text-gray-400",children:"/"}),s.jsx(Gt,{href:"/soporte/casos",className:"text-gray-600 hover:text-[#2c4370] hover:underline",children:"Soporte"}),s.jsx("span",{className:"text-gray-400",children:"/"}),s.jsx("span",{className:"font-medium text-gray-900",children:"Casos"})]})}),e[75]=zs):zs=e[75];let $;e[76]!==ft||e[77]!==t.filter||e[78]!==us||e[79]!==r.total?($=t.filter&&s.jsxs("div",{className:"mb-4 bg-[#2c4370] text-white px-3 sm:px-4 py-2 sm:py-3 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm sm:text-base",children:[s.jsx(Kt,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{className:"font-medium",children:us()}),s.jsxs("span",{className:"text-white/70",children:["(",r.total,")"]})]}),s.jsxs("button",{onClick:ft,className:"flex items-center gap-1 hover:bg-white/20 px-2 py-1 transition-colors text-sm",children:[s.jsx(Yt,{className:"w-4 h-4"}),s.jsx("span",{children:"Quitar"})]})]}),e[76]=ft,e[77]=t.filter,e[78]=us,e[79]=r.total,e[80]=$):$=e[80];const bt=t.filter?us():"Casos";let L;e[81]!==bt?(L=s.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:bt}),e[81]=bt,e[82]=L):L=e[82];let Rs;e[83]===Symbol.for("react.memo_cache_sentinel")?(Rs=l=>Lt(l.target.value),e[83]=Rs):Rs=e[83];let O;e[84]!==R?(O=l=>{l.key==="Enter"&&R()},e[84]=R,e[85]=O):O=e[85];let P;e[86]!==S||e[87]!==O?(P=s.jsx(rt,{type:"text",placeholder:"Buscar...",className:"w-full sm:w-64 pr-10 h-9",value:S,onChange:Rs,onKeyDown:O}),e[86]=S,e[87]=O,e[88]=P):P=e[88];let $s;e[89]===Symbol.for("react.memo_cache_sentinel")?($s=s.jsx(nl,{className:"h-4 w-4"}),e[89]=$s):$s=e[89];let V;e[90]!==R?(V=s.jsx(x,{size:"sm",variant:"ghost",className:"absolute right-0 top-0 h-full px-3",onClick:R,children:$s}),e[90]=R,e[91]=V):V=e[91];let H;e[92]!==P||e[93]!==V?(H=s.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[P,V]}),e[92]=P,e[93]=V,e[94]=H):H=e[94];let I;e[95]!==E?(I=()=>Wt(!E),e[95]=E,e[96]=I):I=e[96];const Nt=`h-9 flex-1 sm:flex-initial ${F?"border-[#2c4370] text-[#2c4370]":""}`;let Ls,Os;e[97]===Symbol.for("react.memo_cache_sentinel")?(Ls=s.jsx(Kt,{className:"h-4 w-4 sm:mr-1"}),Os=s.jsx("span",{className:"hidden sm:inline",children:"Filtros"}),e[97]=Ls,e[98]=Os):(Ls=e[97],Os=e[98]);let M;e[99]!==F?(M=F&&s.jsx("span",{className:"ml-1 bg-[#2c4370] text-white text-xs w-5 h-5 flex items-center justify-center",children:"!"}),e[99]=F,e[100]=M):M=e[100];let q;e[101]!==I||e[102]!==Nt||e[103]!==M?(q=s.jsxs(x,{variant:"outline",size:"sm",onClick:I,className:Nt,children:[Ls,Os,M]}),e[101]=I,e[102]=Nt,e[103]=M,e[104]=q):q=e[104];let Ps;e[105]===Symbol.for("react.memo_cache_sentinel")?(Ps=s.jsxs(x,{size:"sm",className:"bg-[#2c4370] hover:bg-[#3d5583] text-white h-9 flex-1 sm:flex-initial",children:[s.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),s.jsx("span",{className:"sm:hidden",children:"Excel"})]}),e[105]=Ps):Ps=e[105];let B;e[106]!==q?(B=s.jsxs("div",{className:"flex items-center gap-2",children:[q,Ps]}),e[106]=q,e[107]=B):B=e[107];let U;e[108]!==H||e[109]!==B?(U=s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[H,B]}),e[108]=H,e[109]=B,e[110]=U):U=e[110];let G;e[111]!==L||e[112]!==U?(G=s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[L,U]})}),e[111]=L,e[112]=U,e[113]=G):G=e[113];let K;e[114]!==yt||e[115]!==u||e[116]!==nt||e[117]!==p||e[118]!==vt||e[119]!==b||e[120]!==N||e[121]!==F||e[122]!==g||e[123]!==E||e[124]!==f||e[125]!==ct?(K=E&&s.jsxs("div",{className:"px-3 sm:px-6 py-3 sm:py-4 bg-gray-50 border-b",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Estado"}),s.jsxs(cs,{value:f,onValueChange:Pt,children:[s.jsx(os,{className:"h-8 text-xs",children:s.jsx(ds,{placeholder:"Todos"})}),s.jsxs(ms,{children:[s.jsx(n,{value:"all",children:"Todos"}),s.jsx(n,{value:"1",children:"Nuevo"}),s.jsx(n,{value:"2",children:"En curso (asignado)"}),s.jsx(n,{value:"3",children:"En curso (planificado)"}),s.jsx(n,{value:"4",children:"En espera"}),s.jsx(n,{value:"5",children:"Resuelto"}),s.jsx(n,{value:"6",children:"Cerrado"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Prioridad"}),s.jsxs(cs,{value:g,onValueChange:Vt,children:[s.jsx(os,{className:"h-8 text-xs",children:s.jsx(ds,{placeholder:"Todas"})}),s.jsxs(ms,{children:[s.jsx(n,{value:"all",children:"Todas"}),s.jsx(n,{value:"1",children:"Muy baja"}),s.jsx(n,{value:"2",children:"Baja"}),s.jsx(n,{value:"3",children:"Media"}),s.jsx(n,{value:"4",children:"Alta"}),s.jsx(n,{value:"5",children:"Muy alta"}),s.jsx(n,{value:"6",children:"Urgente"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Asignado a"}),s.jsxs(cs,{value:u,onValueChange:It,children:[s.jsx(os,{className:"h-8 text-xs",children:s.jsx(ds,{placeholder:"Todos"})}),s.jsxs(ms,{children:[s.jsx(n,{value:"all",children:"Todos"}),ct.map(bl)]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Categoría"}),s.jsxs(cs,{value:p,onValueChange:Ht,children:[s.jsx(os,{className:"h-8 text-xs",children:s.jsx(ds,{placeholder:"Todas"})}),s.jsxs(ms,{children:[s.jsx(n,{value:"all",children:"Todas"}),nt.map(vl)]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Desde"}),s.jsx(rt,{type:"date",value:b,onChange:l=>Mt(l.target.value),className:"h-8 text-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Hasta"}),s.jsx(rt,{type:"date",value:N,onChange:l=>qt(l.target.value),className:"h-8 text-xs"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-3",children:[F&&s.jsxs(x,{variant:"ghost",size:"sm",onClick:vt,className:"h-8 text-xs text-gray-600",children:[s.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Limpiar"]}),s.jsx(x,{size:"sm",onClick:yt,className:"bg-[#2c4370] hover:bg-[#3d5583] text-white h-8 text-xs",children:"Aplicar"})]})]}),e[114]=yt,e[115]=u,e[116]=nt,e[117]=p,e[118]=vt,e[119]=b,e[120]=N,e[121]=F,e[122]=g,e[123]=E,e[124]=f,e[125]=ct,e[126]=K):K=e[126];let Vs;e[127]===Symbol.for("react.memo_cache_sentinel")?(Vs=s.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Mostrar"}),e[127]=Vs):Vs=e[127];let Q;e[128]!==t.per_page?(Q=t.per_page.toString(),e[128]=t.per_page,e[129]=Q):Q=e[129];let Hs;e[130]===Symbol.for("react.memo_cache_sentinel")?(Hs=s.jsx(os,{className:"w-16 sm:w-20 h-7 sm:h-8 text-xs sm:text-sm",children:s.jsx(ds,{placeholder:"15"})}),e[130]=Hs):Hs=e[130];let Is;e[131]===Symbol.for("react.memo_cache_sentinel")?(Is=s.jsxs(ms,{children:[s.jsx(n,{value:"15",children:"15"}),s.jsx(n,{value:"20",children:"20"}),s.jsx(n,{value:"50",children:"50"}),s.jsx(n,{value:"100",children:"100"})]}),e[131]=Is):Is=e[131];let X;e[132]!==jt||e[133]!==Q?(X=s.jsxs(cs,{value:Q,onValueChange:jt,children:[Hs,Is]}),e[132]=jt,e[133]=Q,e[134]=X):X=e[134];let Ms;e[135]===Symbol.for("react.memo_cache_sentinel")?(Ms=s.jsx("span",{className:"text-xs sm:text-sm text-gray-600 hidden sm:inline",children:"elementos"}),e[135]=Ms):Ms=e[135];let Y;e[136]!==X?(Y=s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Vs,X,Ms]}),e[136]=X,e[137]=Y):Y=e[137];let J;e[138]!==r.data.length?(J=s.jsx("span",{className:"font-medium",children:r.data.length}),e[138]=r.data.length,e[139]=J):J=e[139];let W;e[140]!==r.total?(W=s.jsx("span",{className:"font-medium",children:r.total}),e[140]=r.total,e[141]=W):W=e[141];let Z;e[142]!==J||e[143]!==W?(Z=s.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[J," de"," ",W]}),e[142]=J,e[143]=W,e[144]=Z):Z=e[144];let ee;e[145]!==Y||e[146]!==Z?(ee=s.jsxs("div",{className:"px-3 sm:px-6 py-2 sm:py-3 bg-gray-50 border-b flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[Y,Z]}),e[145]=Y,e[146]=Z,e[147]=ee):ee=e[147];let se;e[148]!==c?(se=()=>c("id"),e[148]=c,e[149]=se):se=e[149];let te;e[150]!==o?(te=s.jsxs("div",{className:"flex items-center",children:["ID",o("id")]}),e[150]=o,e[151]=te):te=e[151];let le;e[152]!==se||e[153]!==te?(le=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100 w-16",onClick:se,children:te}),e[152]=se,e[153]=te,e[154]=le):le=e[154];let ae;e[155]!==c?(ae=()=>c("name"),e[155]=c,e[156]=ae):ae=e[156];let re;e[157]!==o?(re=s.jsxs("div",{className:"flex items-center",children:["Título",o("name")]}),e[157]=o,e[158]=re):re=e[158];let ie;e[159]!==ae||e[160]!==re?(ie=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:ae,children:re}),e[159]=ae,e[160]=re,e[161]=ie):ie=e[161];let ne;e[162]!==c?(ne=()=>c("status"),e[162]=c,e[163]=ne):ne=e[163];let ce;e[164]!==o?(ce=s.jsxs("div",{className:"flex items-center",children:["Estado",o("status")]}),e[164]=o,e[165]=ce):ce=e[165];let oe;e[166]!==ne||e[167]!==ce?(oe=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:ne,children:ce}),e[166]=ne,e[167]=ce,e[168]=oe):oe=e[168];let de;e[169]!==c?(de=()=>c("priority"),e[169]=c,e[170]=de):de=e[170];let me;e[171]!==o?(me=s.jsxs("div",{className:"flex items-center",children:["Prioridad",o("priority")]}),e[171]=o,e[172]=me):me=e[172];let xe;e[173]!==de||e[174]!==me?(xe=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:de,children:me}),e[173]=de,e[174]=me,e[175]=xe):xe=e[175];let he;e[176]!==c?(he=()=>c("entity_name"),e[176]=c,e[177]=he):he=e[177];let fe;e[178]!==o?(fe=s.jsxs("div",{className:"flex items-center",children:["Entidad",o("entity_name")]}),e[178]=o,e[179]=fe):fe=e[179];let ge;e[180]!==he||e[181]!==fe?(ge=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:he,children:fe}),e[180]=he,e[181]=fe,e[182]=ge):ge=e[182];let pe;e[183]!==c?(pe=()=>c("date"),e[183]=c,e[184]=pe):pe=e[184];let ue;e[185]!==o?(ue=s.jsxs("div",{className:"flex items-center",children:["Fecha de apertura",o("date")]}),e[185]=o,e[186]=ue):ue=e[186];let je;e[187]!==pe||e[188]!==ue?(je=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:pe,children:ue}),e[187]=pe,e[188]=ue,e[189]=je):je=e[189];let ye;e[190]!==c?(ye=()=>c("date_mod"),e[190]=c,e[191]=ye):ye=e[191];let ve;e[192]!==o?(ve=s.jsxs("div",{className:"flex items-center",children:["Última actualización",o("date_mod")]}),e[192]=o,e[193]=ve):ve=e[193];let be;e[194]!==ye||e[195]!==ve?(be=s.jsx(_,{className:"font-semibold text-gray-900 text-xs cursor-pointer hover:bg-gray-100",onClick:ye,children:ve}),e[194]=ye,e[195]=ve,e[196]=be):be=e[196];let qs,Bs,Us,Gs;e[197]===Symbol.for("react.memo_cache_sentinel")?(qs=s.jsx(_,{className:"font-semibold text-gray-900 text-xs",children:"Solicitante"}),Bs=s.jsx(_,{className:"font-semibold text-gray-900 text-xs",children:"Asignado a"}),Us=s.jsx(_,{className:"font-semibold text-gray-900 text-xs",children:"Categoría"}),Gs=s.jsx(_,{className:"font-semibold text-gray-900 text-xs",children:"Elemento"}),e[197]=qs,e[198]=Bs,e[199]=Us,e[200]=Gs):(qs=e[197],Bs=e[198],Us=e[199],Gs=e[200]);let Ne;e[201]!==y?(Ne=y()&&s.jsx(_,{className:"font-semibold text-gray-900 text-xs text-center w-24",children:"Acciones"}),e[201]=y,e[202]=Ne):Ne=e[202];let _e;e[203]!==le||e[204]!==ie||e[205]!==oe||e[206]!==xe||e[207]!==ge||e[208]!==je||e[209]!==be||e[210]!==Ne?(_e=s.jsx(dl,{children:s.jsxs(Et,{className:"bg-gray-50",children:[le,ie,oe,xe,ge,je,be,qs,Bs,Us,Gs,Ne]})}),e[203]=le,e[204]=ie,e[205]=oe,e[206]=xe,e[207]=ge,e[208]=je,e[209]=be,e[210]=Ne,e[211]=_e):_e=e[211];let Se;if(e[212]!==ns||e[213]!==y||e[214]!==T||e[215]!==r.data){let l;e[217]!==ns||e[218]!==y||e[219]!==T?(l=a=>s.jsxs(Et,{className:"hover:bg-gray-50",children:[s.jsx(v,{className:"text-xs font-medium",children:a.id}),s.jsx(v,{className:"font-medium text-xs",children:s.jsx("button",{onClick:()=>{Jt(a),is(!0)},className:"text-[#2c4370] hover:underline block truncate max-w-md text-left",title:a.name,children:a.name||"(Sin título)"})}),s.jsx(v,{className:"text-xs",children:s.jsx("span",{className:`px-2 py-1 text-[10px] font-semibold ${Ut(a.status)}`,children:a.status_name})}),s.jsx(v,{className:"text-xs",children:a.priority_name}),s.jsx(v,{className:"text-xs",children:a.entity_name||"-"}),s.jsx(v,{className:"text-xs text-gray-600",children:a.date?new Date(a.date).toLocaleDateString("es-CO",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}),s.jsx(v,{className:"text-xs text-gray-600",children:a.date_mod?new Date(a.date_mod).toLocaleDateString("es-CO",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}),s.jsx(v,{className:"text-xs",children:a.requester_name||"-"}),s.jsx(v,{className:"text-xs",children:a.assigned_name||"-"}),s.jsx(v,{className:"text-xs",children:a.category_name||"-"}),s.jsx(v,{className:"text-xs text-gray-600",children:a.item_name||"-"}),y()&&s.jsx(v,{className:"text-xs",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[T(a)&&a.status!==5&&a.status!==6&&s.jsx(x,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-green-600 hover:text-green-800 hover:bg-green-50",onClick:()=>Bt(a),title:"Resolver",children:s.jsx(it,{className:"h-3.5 w-3.5"})}),s.jsx(x,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",onClick:()=>w.visit(`/soporte/casos/${a.id}/editar`),title:"Editar",children:s.jsx(jl,{className:"h-3.5 w-3.5"})}),ns(a)&&s.jsx(x,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-red-600 hover:text-red-800 hover:bg-red-50",onClick:()=>Zt(a),title:"Eliminar",children:s.jsx(cl,{className:"h-3.5 w-3.5"})})]})})]},a.id),e[217]=ns,e[218]=y,e[219]=T,e[220]=l):l=e[220],Se=r.data.map(l),e[212]=ns,e[213]=y,e[214]=T,e[215]=r.data,e[216]=Se}else Se=e[216];let we;e[221]!==y||e[222]!==r.data.length?(we=r.data.length===0&&s.jsx(Et,{children:s.jsx(v,{colSpan:y()?12:11,className:"text-center py-8 text-gray-500",children:"No se encontraron casos"})}),e[221]=y,e[222]=r.data.length,e[223]=we):we=e[223];let Ce;e[224]!==Se||e[225]!==we?(Ce=s.jsxs(ml,{children:[Se,we]}),e[224]=Se,e[225]=we,e[226]=Ce):Ce=e[226];let De;e[227]!==_e||e[228]!==Ce?(De=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(xl,{children:[_e,Ce]})}),e[227]=_e,e[228]=Ce,e[229]=De):De=e[229];let Te;e[230]!==r.current_page||e[231]!==r.last_page?(Te=s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:["Página ",r.current_page," de ",r.last_page]}),e[230]=r.current_page,e[231]=r.last_page,e[232]=Te):Te=e[232];let Fe;if(e[233]!==r.links){let l;e[235]!==r.links.length?(l=(a,d)=>{const kt=d===0||d===r.links.length-1||a.active;return d===0?s.jsx(x,{variant:"outline",size:"sm",disabled:!a.url,className:"border-[#2c4370] text-[#2c4370] hover:!bg-[#2c4370] hover:!text-white disabled:opacity-50 h-8 w-8 p-0",onClick:()=>a.url&&ut(a.url),children:s.jsx(ul,{className:"h-4 w-4"})},d):d===r.links.length-1?s.jsx(x,{variant:"outline",size:"sm",disabled:!a.url,className:"border-[#2c4370] text-[#2c4370] hover:!bg-[#2c4370] hover:!text-white disabled:opacity-50 h-8 w-8 p-0",onClick:()=>a.url&&ut(a.url),children:s.jsx(fl,{className:"h-4 w-4"})},d):s.jsx(x,{variant:a.active?"default":"outline",size:"sm",disabled:!a.url,className:`${kt?"":"hidden sm:inline-flex"} h-8 min-w-[32px] px-2 text-xs sm:text-sm ${a.active?"bg-[#2c4370] hover:!bg-[#3d5583] text-white border-[#2c4370]":"border-[#2c4370] text-[#2c4370] hover:!bg-[#2c4370] hover:!text-white"}`,onClick:()=>a.url&&ut(a.url),children:s.jsx("span",{dangerouslySetInnerHTML:{__html:a.label}})},d)},e[235]=r.links.length,e[236]=l):l=e[236],Fe=r.links.map(l),e[233]=r.links,e[234]=Fe}else Fe=e[234];let ke;e[237]!==Fe?(ke=s.jsx("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2 flex-wrap justify-center",children:Fe}),e[237]=Fe,e[238]=ke):ke=e[238];let Ee;e[239]!==Te||e[240]!==ke?(Ee=s.jsxs("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-t flex flex-col sm:flex-row items-center justify-between gap-3",children:[Te,ke]}),e[239]=Te,e[240]=ke,e[241]=Ee):Ee=e[241];let Ae;e[242]!==G||e[243]!==K||e[244]!==ee||e[245]!==De||e[246]!==Ee?(Ae=s.jsxs("div",{className:"bg-white shadow border border-gray-200",children:[G,K,ee,De,Ee]}),e[242]=G,e[243]=K,e[244]=ee,e[245]=De,e[246]=Ee,e[247]=Ae):Ae=e[247];let ze;e[248]!==$||e[249]!==Ae?(ze=s.jsxs("main",{className:"flex-1 px-3 sm:px-6 py-4 sm:py-6",children:[$,Ae]}),e[248]=$,e[249]=Ae,e[250]=ze):ze=e[250];let Ks;e[251]===Symbol.for("react.memo_cache_sentinel")?(Ks=s.jsx(ol,{}),e[251]=Ks):Ks=e[251];let Re;e[252]!==ze?(Re=s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[zs,ze,Ks]}),e[252]=ze,e[253]=Re):Re=e[253];let Qs;e[254]===Symbol.for("react.memo_cache_sentinel")?(Qs=s.jsx(At,{children:"Eliminar Caso"}),e[254]=Qs):Qs=e[254];const _t=k?.id;let $e;e[255]!==_t?($e=s.jsxs("strong",{children:["#",_t]}),e[255]=_t,e[256]=$e):$e=e[256];let Xs;e[257]===Symbol.for("react.memo_cache_sentinel")?(Xs=s.jsx("br",{}),e[257]=Xs):Xs=e[257];const St=k?.name;let Le;e[258]!==St?(Le=s.jsx("span",{className:"text-gray-600",children:St}),e[258]=St,e[259]=Le):Le=e[259];let Oe;e[260]!==$e||e[261]!==Le?(Oe=s.jsxs(zt,{children:[Qs,s.jsxs(Qt,{children:["¿Está seguro que desea eliminar el caso ",$e,"?",Xs,Le]})]}),e[260]=$e,e[261]=Le,e[262]=Oe):Oe=e[262];let Ys;e[263]===Symbol.for("react.memo_cache_sentinel")?(Ys=s.jsx(x,{variant:"outline",onClick:()=>xs(!1),children:"Cancelar"}),e[263]=Ys):Ys=e[263];let Pe;e[264]!==pt?(Pe=s.jsxs(Xt,{className:"gap-2",children:[Ys,s.jsx(x,{variant:"destructive",onClick:pt,className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]}),e[264]=pt,e[265]=Pe):Pe=e[265];let Ve;e[266]!==Oe||e[267]!==Pe?(Ve=s.jsxs(Rt,{className:"sm:max-w-[425px]",children:[Oe,Pe]}),e[266]=Oe,e[267]=Pe,e[268]=Ve):Ve=e[268];let He;e[269]!==ot||e[270]!==Ve?(He=s.jsx($t,{open:ot,onOpenChange:xs,children:Ve}),e[269]=ot,e[270]=Ve,e[271]=He):He=e[271];const wt=i?.id;let Ie;e[272]!==wt?(Ie=s.jsxs("span",{className:"text-[#2c4370]",children:["Caso #",wt]}),e[272]=wt,e[273]=Ie):Ie=e[273];const Ct=`px-2 py-0.5 text-[10px] font-semibold ${i?Ut(i.status):""}`,Dt=i?.status_name;let Me;e[274]!==Ct||e[275]!==Dt?(Me=s.jsx("span",{className:Ct,children:Dt}),e[274]=Ct,e[275]=Dt,e[276]=Me):Me=e[276];let qe;e[277]!==Ie||e[278]!==Me?(qe=s.jsx(zt,{children:s.jsxs(At,{className:"flex items-center gap-2",children:[Ie,Me]})}),e[277]=Ie,e[278]=Me,e[279]=qe):qe=e[279];let Be;e[280]!==y||e[281]!==T||e[282]!==i?(Be=i&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:i.name})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"bg-gray-50 p-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Prioridad"}),s.jsx("span",{className:"font-medium",children:i.priority_name})]}),s.jsxs("div",{className:"bg-gray-50 p-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Entidad"}),s.jsx("span",{className:"font-medium",children:i.entity_name||"-"})]}),s.jsxs("div",{className:"bg-gray-50 p-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Fecha de Apertura"}),s.jsx("span",{className:"font-medium",children:i.date?new Date(i.date).toLocaleDateString("es-CO",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]}),s.jsxs("div",{className:"bg-gray-50 p-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Última Actualización"}),s.jsx("span",{className:"font-medium",children:i.date_mod?new Date(i.date_mod).toLocaleDateString("es-CO",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]}),s.jsxs("div",{className:"bg-gray-50 p-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Solicitante"}),s.jsx("span",{className:"font-medium",children:i.requester_name||"-"})]}),s.jsxs("div",{className:"bg-gray-50 p-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Asignado a"}),s.jsx("span",{className:"font-medium",children:i.assigned_name||"-"})]}),s.jsxs("div",{className:"bg-gray-50 p-2 col-span-2",children:[s.jsx("span",{className:"text-gray-500 block",children:"Categoría"}),s.jsx("span",{className:"font-medium",children:i.category_name||"-"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[s.jsx(x,{variant:"outline",size:"sm",onClick:()=>is(!1),className:"h-8 text-xs",children:"Cerrar"}),T(i)&&i.status!==5&&i.status!==6&&s.jsxs(x,{size:"sm",onClick:()=>{is(!1),Bt(i)},className:"bg-green-600 hover:bg-green-700 text-white h-8 text-xs",children:[s.jsx(it,{className:"h-3.5 w-3.5 mr-1"}),"Resolver"]}),y()&&s.jsx(x,{size:"sm",onClick:()=>{is(!1),w.visit(`/soporte/casos/${i.id}/editar`)},className:"bg-[#2c4370] hover:bg-[#3d5583] text-white h-8 text-xs",children:"Editar Caso"})]})]}),e[280]=y,e[281]=T,e[282]=i,e[283]=Be):Be=e[283];let Ue;e[284]!==qe||e[285]!==Be?(Ue=s.jsxs(Rt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[qe,Be]}),e[284]=qe,e[285]=Be,e[286]=Ue):Ue=e[286];let Ge;e[287]!==Ue||e[288]!==dt?(Ge=s.jsx($t,{open:dt,onOpenChange:is,children:Ue}),e[287]=Ue,e[288]=dt,e[289]=Ge):Ge=e[289];let Js;e[290]===Symbol.for("react.memo_cache_sentinel")?(Js=s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(it,{className:"h-5 w-5 text-green-600"}),"Resolver Caso"]}),e[290]=Js):Js=e[290];const Tt=A?.id;let Ke;e[291]!==Tt?(Ke=s.jsxs("strong",{children:["#",Tt]}),e[291]=Tt,e[292]=Ke):Ke=e[292];const Ft=A?.name;let Qe;e[293]!==Ke||e[294]!==Ft?(Qe=s.jsxs(zt,{children:[Js,s.jsxs(Qt,{children:["Resolver el caso ",Ke,": ",Ft]})]}),e[293]=Ke,e[294]=Ft,e[295]=Qe):Qe=e[295];let Ws;e[296]===Symbol.for("react.memo_cache_sentinel")?(Ws=s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descripción de la solución ",s.jsx("span",{className:"text-red-500",children:"*"})]}),e[296]=Ws):Ws=e[296];let Zs;e[297]===Symbol.for("react.memo_cache_sentinel")?(Zs=l=>fs(l.target.value),e[297]=Zs):Zs=e[297];let Xe;e[298]!==C?(Xe=s.jsxs("div",{children:[Ws,s.jsx("textarea",{value:C,onChange:Zs,placeholder:"Describe cómo se resolvió el problema...",className:"w-full px-3 py-2 border focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 min-h-[120px] text-sm",autoFocus:!0})]}),e[298]=C,e[299]=Xe):Xe=e[299];let et;e[300]===Symbol.for("react.memo_cache_sentinel")?(et=s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y hora de solución"}),e[300]=et):et=e[300];let st;e[301]===Symbol.for("react.memo_cache_sentinel")?(st=l=>gs(l.target.value),e[301]=st):st=e[301];let Ye;e[302]!==z?(Ye=s.jsx(rt,{type:"datetime-local",value:z,onChange:st,className:"w-full"}),e[302]=z,e[303]=Ye):Ye=e[303];let tt;e[304]===Symbol.for("react.memo_cache_sentinel")?(tt=s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Por defecto se usa la fecha y hora actual. Puede modificarla si la solución fue en otro momento."}),e[304]=tt):tt=e[304];let Je;e[305]!==Ye?(Je=s.jsxs("div",{children:[et,Ye,tt]}),e[305]=Ye,e[306]=Je):Je=e[306];let We;e[307]!==Xe||e[308]!==Je?(We=s.jsxs("div",{className:"space-y-4 py-4",children:[Xe,Je]}),e[307]=Xe,e[308]=Je,e[309]=We):We=e[309];let lt;e[310]===Symbol.for("react.memo_cache_sentinel")?(lt=()=>{hs(!1),xt(null),fs(""),gs("")},e[310]=lt):lt=e[310];let Ze;e[311]!==D?(Ze=s.jsx(x,{variant:"outline",onClick:lt,disabled:D,children:"Cancelar"}),e[311]=D,e[312]=Ze):Ze=e[312];let es;e[313]!==C||e[314]!==D?(es=!C.trim()||D,e[313]=C,e[314]=D,e[315]=es):es=e[315];let ss;e[316]!==D?(ss=D?s.jsxs(s.Fragment,{children:[s.jsx(yl,{className:"h-4 w-4 mr-1 animate-spin"}),"Resolviendo..."]}):s.jsxs(s.Fragment,{children:[s.jsx(it,{className:"h-4 w-4 mr-1"}),"Resolver"]}),e[316]=D,e[317]=ss):ss=e[317];let ts;e[318]!==gt||e[319]!==es||e[320]!==ss?(ts=s.jsx(x,{onClick:gt,disabled:es,className:"bg-green-600 hover:bg-green-700 text-white",children:ss}),e[318]=gt,e[319]=es,e[320]=ss,e[321]=ts):ts=e[321];let ls;e[322]!==Ze||e[323]!==ts?(ls=s.jsxs(Xt,{className:"gap-2",children:[Ze,ts]}),e[322]=Ze,e[323]=ts,e[324]=ls):ls=e[324];let as;e[325]!==Qe||e[326]!==We||e[327]!==ls?(as=s.jsxs(Rt,{className:"sm:max-w-[500px]",children:[Qe,We,ls]}),e[325]=Qe,e[326]=We,e[327]=ls,e[328]=as):as=e[328];let rs;e[329]!==mt||e[330]!==as?(rs=s.jsx($t,{open:mt,onOpenChange:hs,children:as}),e[329]=mt,e[330]=as,e[331]=rs):rs=e[331];let at;return e[332]!==Ge||e[333]!==rs||e[334]!==Re||e[335]!==He?(at=s.jsxs(s.Fragment,{children:[As,Re,He,Ge,rs]}),e[332]=Ge,e[333]=rs,e[334]=Re,e[335]=He,e[336]=at):at=e[336],at}function vl(j){return s.jsx(n,{value:j.id.toString(),children:j.completename},j.id)}function bl(j){return s.jsx(n,{value:j.id.toString(),children:j.fullname},j.id)}function Nl(j){switch(j){case 1:return"bg-blue-100 text-blue-800";case 2:return"bg-yellow-100 text-yellow-800";case 3:return"bg-yellow-100 text-yellow-800";case 4:return"bg-orange-100 text-orange-800";case 5:return"bg-green-100 text-green-800";case 6:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function _l(j){j&&w.visit(j,{preserveScroll:!0})}export{Bl as default};
